/*! okanjo-metrics.js v3.5.0 | (c) 2013 Okanjo Partners Inc | https://okanjo.com/ */
!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.okanjo=t()}(this,function(){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function e(e,t,n){t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1})}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e){return"function"==typeof e||"[object Function]"===t.call(e)}function s(e){return e=function(e){e=Number(e);return isNaN(e)?0:0!==e&&isFinite(e)?(0<e?1:-1)*Math.floor(Math.abs(e)):e}(e),Math.min(Math.max(e,0),n)}Array.from||(Array.from=(t=Object.prototype.toString,n=Math.pow(2,53)-1,function(e){var t=Object(e);if(null==e)throw new TypeError("Array.from requires an array-like object - not null or undefined");var n,r=1<arguments.length?arguments[1]:void 0;if(void 0!==r){if(!c(r))throw new TypeError("Array.from: when provided, the second argument must be a function");2<arguments.length&&(n=arguments[2])}for(var o,i=s(t.length),a=c(this)?Object(new this(i)):new Array(i),u=0;u<i;)o=t[u],a[u]=r?void 0===n?r(o,u):r.call(n,o,u):o,u+=1;return a.length=i,a})),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var r=arguments[1],o=0;o<n;){var i=t[o];if(e.call(r,i,o,t))return i;o++}}}),Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var r=arguments[1],o=0;o<n;){var i=t[o];if(e.call(r,i,o,t))return o;o++}return-1}}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(e,t){if(null==this)throw new TypeError('"this" is null or not defined');var n=Object(this),r=n.length>>>0;if(0==r)return!1;var o,i,t=0|t,a=Math.max(0<=t?t:r-Math.abs(t),0);for(;a<r;){if((o=n[a])===(i=e)||"number"==typeof o&&"number"==typeof i&&isNaN(o)&&isNaN(i))return!0;a++}return!1}}),window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=function(e,t){t=t||window;for(var n=0;n<this.length;n++)e.call(t,this[n],n,this)}),"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e),r=1;r<arguments.length;r++){var o=arguments[r];if(null!=o)for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])}return n},writable:!0,configurable:!0}),a=window,l=document,d=void 0!==a.pageXOffset,p="CSS1Compat"===(l.compatMode||""),y=a.navigator.userAgent,m=/[\s\S](?:\.\.\.)?$/,v=/(iPhone|iPad|iPod|Android|blackberry)/i,g=a.console,(w={version:"3.5.0",metrics:null,key:(a.okanjo||{}).key||null,report:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,o=t.find(function(e){return e instanceof Error});o?((r=(new Error).stack.split("\n")).shift(),r.shift(),t.push({reportStack:r.join("\n")}),t=t.filter(function(e){return e!==o})):(r=t.findIndex(function(e){return"string"==typeof e}),o=new Error(t[r]||"Okanjo Error"),0<=r&&t.splice(r,1)),g.error("[Okanjo v".concat(w.version,"]: ").concat(o.stack)),t.length&&g.error.apply(g,["Additional information:"].concat(t))},warn:function(e){e=new Error(e);g.warn("[Okanjo v".concat(w.version,"]: ").concat(e.stack));for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];n.length&&g.warn.apply(g,["Additional information:"].concat(n))},qwery:function(e,t){return"string"!=typeof t||(t=l.querySelector(t))?(t=t||l).querySelectorAll(e):[]}}).lib={},w.net={endpoint:"https://api2.okanjo.com",sandboxEndpoint:"https://sandbox-api2.okanjo.com",routes:{ads:"/content",metrics:"/metrics/:object_type/:event_type",metrics_batch:"/metrics"},getRoute:function(t,n,e){return n&&Object.keys(n).forEach(function(e){t=t.replace(":".concat(e),n[e]+"")}),("sandbox"===(e=e||w.env||"live")?w.net.sandboxEndpoint:w.net.endpoint)+t},request:function(){}},w.util={isEmpty:function(e){return null==e||"string"==typeof e&&0===e.trim().length},isMobile:function(){return v.test(y)},getPageArguments:function(e){function t(e){var r={};return(e=e||"").split("&").forEach(function(e){var t,n=e.indexOf("="),e=n<0?(t=decodeURIComponent(e),null):(t=decodeURIComponent(e.substring(0,n)),decodeURIComponent(e.substring(n+1)));t&&(r[t]=e)}),r}var n=t(a.location.search.substring(a.location.search.indexOf("?")+1)),r=e?t(a.location.hash.substring(Math.max(a.location.hash.indexOf("#")+1,a.location.hash.indexOf("#!")+2))):{};return Object.keys(r).forEach(function(e){return n[e]=r[e]}),n},ifDefined:function(e){return null!=e?e:null}},w.util.deepClone=function(t,n){return Array.isArray(t)?n=(n=n||[]).concat(t.map(function(e){return w.util.deepClone(e)})):"object"===f(t)&&null!==t?(n=n||{},Object.keys(t).forEach(function(e){n[e]=w.util.deepClone(t[e])})):n=t,n},w.util.flatten=function(e){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},o={};return null!=e&&Object.keys(e).forEach(function(t){var n;e[t]instanceof Date?r.dateToIso?o[t]=e[t].toISOString():o[t]=e[t]:"object"!==f(e[t])||null===e[t]||Array.isArray(e[t])&&!0===r.ignoreArrays?o[t]=e[t]:Array.isArray(e[t])&&!0===r.arrayToCsv?o[t]=e[t].join(","):(n=w.util.flatten(e[t],r),Object.keys(n).forEach(function(e){o[t+"_"+e]=n[e]}))}),o},
/*! based on shortid https://github.com/dylang/shortid */
w.util.shortid=(h=a.crypto||a.msCrypto||"function"==typeof require&&require("crypto"),function(){var e="",t=Math.floor(.001*((new Date).getTime()-1490384907498));return t===u?o++:(o=0,u=t),e=e+C(7)+C(0),0<o&&(e+=C(o)),e+=C(t)}),w.util.getLocation=function(){if(a.location===a.parent.location)return a.location.href;try{return a.parent.location.href}catch(e){}return l.referrer||l.referrer},w.ui={getScrollPosition:function(){return{x:d?a.pageXOffset:(p?l.documentElement:l.body).scrollLeft,y:d?a.pageYOffset:(p?l.documentElement:l.body).scrollTop}},getElementSize:function(e,t){var n={height:e.offsetHeight,width:e.offsetWidth},e=e.currentStyle||a.getComputedStyle(e);return t&&(n.height+=parseInt(e.marginTop)+parseInt(e.marginBottom),n.width+=parseInt(e.marginLeft)+parseInt(e.marginRight)),n},getPageSize:function(){var e=l.querySelector("body"),t=l.documentElement;return{w:Math.max(e.scrollWidth,e.offsetWidth,t.clientWidth,t.scrollWidth,t.offsetWidth),h:Math.max(e.scrollHeight,e.offsetHeight,t.clientHeight,t.scrollHeight,t.offsetHeight)}},getViewportSize:function(){var e=p?l.documentElement:l.body,t=e.clientWidth,e=e.clientHeight,n=a.innerWidth||0,r=a.innerHeight||0,o=n&&n<t||r&&r<e;return{vw:o?n:t,vh:o?r:e}},getEventPosition:function(e){var t=e.pageX,n=e.pageY,r=l.body,o=l.documentElement,i="scrollLeft",a="scrollTop";return{et:e.__proto__.constructor.name,ex:void 0===t?e.clientX+r[i]+o[i]:t,ey:void 0===n?e.clientY+r[a]+o[a]:n}},getElementPosition:function(t){var n="Could not get position of element. Did you attach the element to the DOM before initializing?";try{var e=t.getBoundingClientRect(),r=l.body.getBoundingClientRect();return l.body.contains(t)||w.report(n,t),{x1:e.left-r.left,y1:e.top-r.top,x2:e.right-r.left,y2:e.bottom-r.top}}catch(e){return w.report(n,{exception:e,element:t}),{x1:0,y1:0,x2:0,y2:0,err:1}}},_getIntersection:function(e,t,n){var r=Math.max(e.x1,t.x),o=Math.min(e.x2,t.x+n.vw),i=Math.max(e.y1,t.y),t=Math.min(e.y2,t.y+n.vh);return{intersectionArea:Math.max(0,o-r)*Math.max(0,t-i),elementArea:(e.x2-e.x1)*(e.y2-e.y1)}},isElementVisible:function(e){return 0<e.offsetWidth&&0<e.offsetHeight},getPercentageInViewport:function(e){var e=w.ui.getElementPosition(e),t=w.ui.getScrollPosition(),n=w.ui.getViewportSize();if(e.err)return{percentage:0,elementArea:null,intersectionArea:null};e=w.ui._getIntersection(e,t,n),t=e.intersectionArea,n=e.elementArea;return n<=0?{percentage:0,elementArea:n,intersectionArea:t}:{percentage:t/n,elementArea:n,intersectionArea:t}}},w.ui.ellipsify=function(e,t){for(var n,t=t||e.parentNode,r=w.ui.getElementSize(t).height,o=void 0!==e.textContent,i=o?e.textContent:e.innerText,a="",u=5e3,c=function(e){return a=e.substring(0,e.length-3)+a,"..."};w.ui.getElementSize(e).height>r&&0<i.length&&0<u--;)i=(i=o?e.textContent:e.innerText).replace(m,c),o?e.textContent=i:e.innerText=i;0<a.length&&(t=l.createElement("span"),n=l.createElement("span"),t.setAttribute("class","okanjo-ellipses"),n.setAttribute("class","okanjo-visually-hidden"),o?(t.textContent=i.substring(0,i.length-3),n.textContent=a):(t.innerText=i.substring(0,i.length-3),n.innerText=a),e.innerHTML="",e.appendChild(t),e.appendChild(n))},w.ui.fitImages=function(e){"objectFit"in l.documentElement.style||e.querySelectorAll("img.okanjo-fit").forEach(function(e){e.style.display="none";var t=e.parentNode;t.style.backgroundSize="cover",t.style.backgroundImage="url("+e.src+")",t.style.backgroundposition="center center"})},w.ui.articleSVG=function(){return'<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 48 48" style="enable-background:new 0 0 48 48;" xml:space="preserve"> <g id="newspaper_1_"> <g id="newspaper_2_"> <path id="newspaper_6_" d="M21.5,23h-5c-0.276,0-0.5-0.224-0.5-0.5v-5c0-0.276,0.224-0.5,0.5-0.5h5c0.276,0,0.5,0.224,0.5,0.5v5 C22,22.776,21.776,23,21.5,23z M37,32c0,1.654-1.346,3-3,3h-2H15c-1.654,0-3-1.346-3-3V14c0-0.552,0.448-1,1-1h17 c0.552,0,1,0.448,1,1v18c0,0.552,0.449,1,1,1h2c0.551,0,1-0.448,1-1V17h-1v14.75c0,0.138-0.112,0.25-0.25,0.25h-1.5 C32.112,32,32,31.888,32,31.75V16c0-0.552,0.448-1,1-1h3c0.552,0,1,0.448,1,1v1V32z M15,33h14.184C29.072,32.686,29,32.352,29,32 V15H14v17C14,32.552,14.449,33,15,33z M26.5,19h-2c-0.276,0-0.5-0.224-0.5-0.5v-1c0-0.276,0.224-0.5,0.5-0.5h2 c0.276,0,0.5,0.224,0.5,0.5v1C27,18.776,26.776,19,26.5,19z M26.5,23h-2c-0.276,0-0.5-0.224-0.5-0.5v-1c0-0.276,0.224-0.5,0.5-0.5 h2c0.276,0,0.5,0.224,0.5,0.5v1C27,22.776,26.776,23,26.5,23z M26.5,27h-10c-0.276,0-0.5-0.224-0.5-0.5v-1 c0-0.276,0.224-0.5,0.5-0.5h10c0.276,0,0.5,0.224,0.5,0.5v1C27,26.776,26.776,27,26.5,27z M26.5,31h-10 c-0.276,0-0.5-0.224-0.5-0.5v-1c0-0.276,0.224-0.5,0.5-0.5h10c0.276,0,0.5,0.224,0.5,0.5v1C27,30.776,26.776,31,26.5,31z"/> </g> </g> </svg>'},w.ui.productSVG=function(){return'<svg id="glyphicons-basic" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"> <path id="cart" d="M13,26.5A1.5,1.5,0,1,1,11.5,25,1.5,1.5,0,0,1,13,26.5ZM21.5,25A1.5,1.5,0,1,0,23,26.5,1.5,1.5,0,0,0,21.5,25ZM27.96436,8.82544l-2,9A1.49988,1.49988,0,0,1,24.5,19H11.77l.4375,2H23a1,1,0,0,1,1,1v1a1,1,0,0,1-1,1H11a1.5,1.5,0,0,1-1.46533-1.17944L6.29248,8H4A1,1,0,0,1,3,7V6A1,1,0,0,1,4,5H7.5A1.49993,1.49993,0,0,1,8.96533,6.17944L9.14484,7H26.5a1.50029,1.50029,0,0,1,1.46436,1.82544ZM24.62988,10H9.80115l1.31256,6H23.29688Z"/></svg>'},w.ui.inlineSVG=function(e){return"data:image/svg+xml;base64,"+btoa('<?xml version="1.0" encoding="UTF-8" standalone="no"?>'+e)};var t,n,a,l,o,u,h,d,p,y,m,v,g,w,b,x,_,k,E,j,A,S=a.okanjo=w;function C(e){for(var t,n=0,r="";!t;)r+="ylZM7VHLvOFcohp01x-fXNr8P_tqin6RkgWGm4SIDdK5s2TAJebzQEBUwuY9j3aC"[e>>4*n&15|function(){if(h&&h.randomBytes)return 48&h.randomBytes(1)[0];if(!h||!h.getRandomValues)return 48&Math.floor(256*Math.random());var e=new Uint8Array(1);return h.getRandomValues(e),48&e[0]}()],t=e<Math.pow(16,n+1),n++;return r}return function(u){function a(e,t){return t?"".concat(t,"[").concat(l(e),"]"):l(e)}var c=/^application\/json/,s=u.okanjo,l=(s.net.request=function(e,t,n,r){"function"==typeof n&&(r=n,n=void 0);function o(e,t){a||(a=!0,r(e,t))}var i=new(u.XMLHttpRequest||u.ActiveXObject)("MSXML2.XMLHTTP.3.0"),a=!1;s.net.request.timeout&&(i.timeout=s.net.request.timeout),i.ontimeout=function(e){o({statusCode:504,error:"Request timed out",message:"Something went wrong",attributes:{event:e,xhr:i}})},i.onreadystatechange=function(e){var t;4===i.readyState&&(0<i.status?(t=c.test(i.getResponseHeader("Content-Type"))?JSON.parse(i.responseText):{statusCode:i.status,data:i.responseText},200<=i.status&&i.status<300?o(null,t):o(t)):o({statusCode:503,error:"Request failed",message:"Something went wrong",attributes:{event:e,xhr:i}}))},i.open(e.toUpperCase(),t),i.withCredentials=!0,["POST","PUT","PATCH"].includes(e.toUpperCase())&&(i.setRequestHeader("Content-Type","application/json; charset=utf-8"),void 0!==n&&(n=JSON.stringify(n))),i.send(n||void 0)},s.net.request.get=s.net.request.bind(this,"GET"),s.net.request.post=s.net.request.bind(this,"POST"),s.net.request.put=s.net.request.bind(this,"PUT"),s.net.request.delete=s.net.request.bind(this,"DELETE"),function(e){return null==e?"":encodeURIComponent(""+e)});s.net.request.stringify=function(r,o){var i=[];return o=o||"",Object.keys(r).forEach(function(t){var e,n=r[t];Array.isArray(n)?n.forEach(function(e){return i.push(a(t,o)+"="+l(e))}):"object"===f(n)&&null!==n?(e=s.net.request.stringify(n,a(t,o)))&&i.push(e):void 0!==n&&i.push(a(t,o)+"="+l(n))}),i.join("&")}}(window),b=window,x=document,b.okanjo.util.cookie={set:function(e,t,n){var r=new Date,n=(r.setDate(r.getDate()+n),n?" Expires="+r.toUTCString()+";":""),r="https:"===b.location.protocol?" Secure;":"",t="".concat(encodeURI(t),";").concat(n).concat(r," SameSite=None;").concat(" Path=/");x.cookie=e+"="+t},get:function(n){var r=null;return x.cookie.split(";").find(function(e){var t=e.substr(0,e.indexOf("=")).trim(),e=e.substr(e.indexOf("=")+1);return t===n&&(r=decodeURI(e),!0)}),r}},_=window,k=document,E=_.okanjo,(j=function(){function o(){i(this,o),this._queue=this._getStoredQueue(),this._processTimeout=null,this.pageId=E.util.shortid(),this.defaultChannel=o.Channel.external,this.sid=null,this.sourceCh=null,this.sourceCx=null,this._checkUrlForReferral()}return e(o,[{key:"_getStoredQueue",value:function(){if(!_.localStorage[o.Params.queue])return[];try{var e=JSON.parse(_.localStorage[o.Params.queue]);return Array.isArray(e)?e:(E.report("Stored queue is not a queue",{queue:e}),[])}catch(e){return E.report("Failed to load metric queue from storage",{err:e}),[]}}},{key:"_saveQueue",value:function(e){var t=this;e?(this._saveQueueTimeout&&clearTimeout(this._saveQueueTimeout),this._saveQueueTimeout=setTimeout(function(){t._saveQueue(!1),t._saveQueueTimeout=null},100)):_.localStorage[o.Params.queue]=JSON.stringify(this._queue)}},{key:"_checkUrlForReferral",value:function(){var e=E.util.getPageArguments(!0),t=e[o.Params.name],n=_.localStorage[o.Params.name]||E.util.cookie.get(o.Params.name),r=e[o.Params.context],e=e[o.Params.channel];t&&n&&t!==n&&this.trackEvent({object_type:o.Object.metric_session,event_type:o.Event.correlation,id:t+"_"+n,ch:this.defaultChannel,_noProcess:!0}),this.sid=n||t||null,this.sourceCh=e||null,this.sourceCx=r||null}},{key:"trackEvent",value:function(e,t){e.object_type&&e.event_type?this._push(e,t):E.report("Invalid metric to track (missing object_type or event_type)",{event:e})}},{key:"trackPageView",value:function(e,t){(e=e||{}).object_type=o.Object.page,e.event_type=o.Event.view,e.id=e.id||E.util.getLocation(),e.ch=e.ch||this.defaultChannel,this.trackEvent(e,t)}},{key:"_push",value:function(e,t){this._queue.push({event:e,callback:t}),this._saveQueue(!0),e._noProcess?delete e._noProcess:this._processQueue()}},{key:"_processQueue",value:function(){var r=this;!this._processTimeout&&0<this._queue.length&&(this._processTimeout=setTimeout(function(){var e=r._queue.splice(0,255);r._saveQueue(!1),r._batchSend(e,function(t,n){n&&n.data&&n.data.sid&&r._updateSid(n.data.sid),r._processTimeout=null,r._processQueue(),e.forEach(function(e){e.callback&&e.callback(t,n)})})},0))}},{key:"_batchSend",value:function(n,r){var t=this,e={events:n.map(function(e){return t._normalizeEvent(e.event),delete e.event.sid,delete e.event.win,e.event}),win:E.util.getLocation()},o=E.net.getRoute(E.net.routes.metrics_batch);this.sid&&(e.sid=this.sid),E.net.request.post(o,e,function(e,t){e&&E.report("Failed to send metrics batch",{err:e,res:t,items:n,route:o}),r&&r(e,t)})}},{key:"_normalizeEvent",value:function(t){t.m=t.m||{},t.key=t.key||t.m.key||E.key||void 0,this.sid&&(t.sid=this.sid),t.m=Object.assign({},t.m),this.sourceCh&&(t.m.ref_ch=this.sourceCh),this.sourceCx&&(t.m.ref_cx=this.sourceCx),t.m.pgid=this.pageId,t.m.ok_ver=E.version,t.m=E.util.flatten(t.m,{arrayToCsv:!0});var n=new Set(o.Meta.include);Object.keys(t.m).forEach(function(e){n.has(e)||delete t.m[e]}),Object.keys(t.m).forEach(function(e){"string"==typeof t.m[e]&&(t.m[e]=t.m[e].substr(0,255))}),k.referrer&&(t.ref=k.referrer),t.win=E.util.getLocation()}},{key:"_updateSid",value:function(e){!e||this.sid&&this.sid===e||(this.sid=e,_.localStorage[o.Params.name]=e,E.util.cookie.set(o.Params.name,e,o.Params.ttl))}},{key:"create",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return o.create.apply(null,t)}}],[{key:"addElementInfo",value:function(e,t){var n=E.ui.getPageSize(),e=E.ui.getElementPosition(e);return(t=t||{}).m=t.m||{},t.m.pw=n.w,t.m.ph=n.h,t.m.x1=e.x1,t.m.y1=e.y1,t.m.x2=e.x2,t.m.y2=e.y2,t}},{key:"addWidgetInfo",value:function(e,t){function n(e,t){return void 0===t||e<t?e:t}function r(e,t){return void 0===t||t<e?e:t}function o(e,t){return void 0===e?t:e}var i,a,u,c,s,l=E.ui.getElementPosition(e),e=((t=t||{}).m=t.m||{},t.m.wox1=l.x1,t.m.woy1=l.y1,t.m.wox2=l.x2,t.m.woy2=l.y2,E.qwery(".okanjo-resource, .okanjo-adx-container",e)),f=[];return e.forEach(function(e){i=E.ui.getElementPosition(e),a=n(i.x1,a),u=n(i.y1,u),c=r(i.x2,c),s=r(i.y2,s),f.push(i.x1,i.y1,i.x2,i.y2)}),t.m.wix1=o(a,l.x1),t.m.wiy1=o(u,l.y1),t.m.wix2=o(c,l.x2),t.m.wiy2=o(s,l.y2),t.m.wrps=f.map(function(e){return Math.floor(e)}).join(","),t}},{key:"addViewportInfo",value:function(e){var t=E.ui.getViewportSize(),n=E.ui.getScrollPosition();return(e=e||{}).m=e.m||{},e.m.vx1=n.x,e.m.vy1=n.y,e.m.vx2=n.x+t.vw,e.m.vy2=n.y+t.vh,e}},{key:"addEventInfo",value:function(e,t){e=E.ui.getEventPosition(e);return(t=t||{}).m=t.m||{},t.m.et=e.et,t.m.ex=e.ex,t.m.ey=e.ey,t}},{key:"addEventMeta",value:function(e){(e=e||{}).m=e.m||{};for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.m=Object.assign.apply(Object,[e.m].concat(n)),e}},{key:"create",value:function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return new A(e,n)}}]),o}()).Params={queue:"_ok_q",name:"ok_msid",channel:"ok_ch",context:"ok_cx",ttl:1460},j.Meta={exclude:["key","callback","metrics_channel_context","metrics_context","mode"],include:["decl","ex","ey","filters_sort_by","filters_sort_direction","filters_take","filters_type","filters_url","ok_ver","ph","pw","pten","ptid","res_bf","res_length","res_sf","res_spltfl","res_type","bf","sf","spltfl_seg","vx1","vx2","vy1","vy2","pgid","wgid","wix1","wix2","wiy1","wiy2","wox1","wox2","woy1","woy2","wrps","x1","x2","y1","y2","cid","campaign_id","expandable","res_total"]},j.Event={view:"vw",impression:"imp",interaction:"int",correlation:"cor"},j.Action={click:"click",inline_click:"inline_click"},j.Object={article:"am",thirdparty_ad:"ta",cart:"ct",page:"pg",widget:"wg",product:"pr",store:"st",cause:"ca",marketplace:"mp",order:"or",order_item:"oi",user:"ur",metric_session:"mt"},j.Channel={placement:"pw",marketplace:"mp",external:"ex",product_widget:"pw",ad_widget:"aw",store_widget:"sw"},j.Environment={live:"live",testing:"testing"},A=function(){function r(e,t){var n=this;i(this,r),this.data(e=e||{}),Array.isArray(t)&&t.forEach(function(e){n.data(e)})}return e(r,[{key:"data",value:function(e){return Object.assign(this,E.util.deepClone(e)),this}},{key:"event",value:function(e){return j.addEventInfo(e,this),this}},{key:"viewport",value:function(){return j.addViewportInfo(this),this}},{key:"element",value:function(e){return j.addElementInfo(e,this),this}},{key:"widget",value:function(e){return j.addWidgetInfo(e,this),this}},{key:"meta",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return j.addEventMeta.apply(null,[this].concat(t)),this}},{key:"type",value:function(e,t){return this.object_type=e,this.event_type=t,this}},{key:"send",value:function(e){E.metrics.trackEvent(this,e)}},{key:"toUrl",value:function(){var e=Object.assign({},this),t=e.object_type,n=e.event_type;return delete e.object_type,delete e.event_type,E.metrics._normalizeEvent(e),E.net.getRoute(E.net.routes.metrics,{object_type:t,event_type:n})+"?"+E.net.request.stringify(e)}}]),r}(),E.metrics=new j,S});
//# sourceMappingURL=okanjo-metrics.min.js.map
