{"version":3,"names":[],"mappings":"","sources":["okanjo-bundle.js"],"sourcesContent":["/*! okanjo-js v0.7.1 | (c) 2013 Okanjo Partners Inc | https://okanjo.com/ */\n/*! okanjo-js v0.7.1 | (c) 2013 Okanjo Partners Inc | https://okanjo.com/ */\n!function(t,e){\"function\"==typeof define&&define.amd?define([],e):\"object\"==typeof exports?module.exports=e():t.okanjo=e()}(this,function(){var okanjo=function(t){function e(t){for(var e,o,n,i,r={},a=t.split(\"&\"),c=0;c<a.length;c++)try{e=a[c],i=e.indexOf(\"=\"),0>i?(o=decodeURIComponent(e),n=null):(o=decodeURIComponent(e.substring(0,i)),n=decodeURIComponent(e.substring(i+1))),o&&(r[o]=n)}catch(s){console.error(\"[Okanjo] Failed to parse URL parameter:\",e,s)}return r}var o=void 0!==window.pageXOffset,n=\"CSS1Compat\"===(document.compatMode||\"\"),i=window.navigator.userAgent,r=function(){},a=t||{};a.qwery=r,a.metrics={trackEvent:r,trackPageView:r},a.routes={products:\"/products\",products_id:\"/products/:product_id\",products_sense:\"/products/sense\",metrics:\"/metrics/:object_type/:event_type\"},a.getRoute=function(t,e){if(e)for(var o in e)e.hasOwnProperty(o)&&(t=t.replace(\":\"+o,e[o]+\"\"));return a.config.ads.apiUri+t},a.exec=function(t,e,o){e=e||{},a.JSONP({url:t,data:e,error:function(t){var e={statusCode:500,error:\"Communication Error\",message:t.message||\"JSONP communication failure.\"};a.report(\"core-jsonp\",t.error||new Error(e.message)),o(e,null)},success:function(t){var e,n;t?t.error?e=t:n=t:(e={statusCode:500,error:\"Invalid Response\",message:\"Could not interpret the JSONP response.\"},a.report(\"core-jsonp\",new Error(e.message))),o(e,n)}})},a.report=function(t,e){var o;\"string\"==typeof e?o=new Error(\"[Okanjo\"+(t?\" \"+t:\"\")+\"] \"+e):\"object\"==typeof e&&e instanceof Error&&(o=e),console.error(o)};var c=a.util=a.util||{};/*! https://github.com/isaacs/inherits/blob/master/inherits_browser.js */\n/*! based on shortid https://github.com/dylang/shortid */\nreturn c.trim=function(t){return(t||\"\").replace(/^\\s+|\\s+$/g,\"\")},c.empty=function(t){return null===t||void 0===t||\"string\"==typeof t&&\"\"===c.trim(t)},c.clone=function(t){var e={};t=t||{};for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);return e},c.hash=function(t){var e=0;if(0===t.length)return\"\"+e;for(var o=0;o<t.length;o++){var n=t.charCodeAt(o);e=(e<<5)-e+n}return e.toString(16).replace(/^-/,\"n\")},c.data=function(t){var e={};if(t)for(var o=t.attributes,n=o.length-1;n>=0;n--)0===o[n].name.indexOf(\"data-\")&&(e[o[n].name.substr(5)]=o[n].value);return e},c.copyIfSet=function(t,e,o,n,i){function r(n){!e||void 0===e[n]||i.stripEmpty&&c.empty(e[n])||(t[o]=e[n])}if(n=n||o,i=i||{},\"object\"==typeof n&&Array.isArray(n))for(var a=0;a<n.length;a++)r(n[a]);else r(n)},c.copyIfSetMap=function(t,e,o,n){for(var i=Object.keys(o),r=0;r<i.length;r++)c.copyIfSet(t,e,i[r],o[i[r]],n)},c.inherits=function(t,e){if(\"function\"==typeof Object.create)t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}});else{t.super_=e;var o=function(){};o.prototype=e.prototype,t.prototype=new o,t.prototype.constructor=t}},c.getScrollPosition=function(){return{x:o?window.pageXOffset:n?document.documentElement.scrollLeft:document.body.scrollLeft,y:o?window.pageYOffset:n?document.documentElement.scrollTop:document.body.scrollTop}},c.getElementSize=function(t,e){var o,n={height:t.offsetHeight,width:t.offsetWidth};return e&&(o=t.currentStyle||getComputedStyle(t),n.height+=parseInt(o.marginTop)+parseInt(o.marginBottom),n.width+=parseInt(o.marginLeft)+parseInt(o.marginRight)),n},c.getElementPosition=function(t){var e,o,n=\"[Okanjo Core] Could not get position of element. Did you attach the element to the DOM before initializing?\";try{return e=t.getBoundingClientRect(),o=c.getScrollPosition(),document.body.contains(t)||console.warn(n),{x1:e.left+o.x,y1:e.top+o.y,x2:e.right+o.x,y2:e.bottom+o.y}}catch(i){return console.warn(n,i),{x1:0,y1:0,x2:0,y2:0}}},c.getPageSize=function(){var t=a.qwery(\"body\")[0],e=document.documentElement;return{w:Math.max(t.scrollWidth,t.offsetWidth,e.clientWidth,e.scrollWidth,e.offsetWidth),h:Math.max(t.scrollHeight,t.offsetHeight,e.clientHeight,e.scrollHeight,e.offsetHeight)}},c.getViewportSize=function(){var t=document,e=window,o=t.compatMode&&\"CSS1Compat\"===t.compatMode?t.documentElement:t.body,n=o.clientWidth,i=o.clientHeight,r=e.innerWidth||0,a=e.innerHeight||0,c=r&&n>r||a&&i>a;return{vw:c?r:n,vh:c?a:i}},c.getEventPosition=function(t){var e=t.pageX,o=t.pageY,n=document,i=n.body,r=n.documentElement,a=\"scrollLeft\",c=\"scrollTop\";return{ex:void 0===e?t.clientX+i[a]+r[a]:e,ey:void 0===o?t.clientY+i[c]+r[c]:o}},c.ellipsify=function(t,e){for(var o=e||t.parentNode,n=c.getElementSize(o).height,i=void 0!==t.textContent,r=i?t.textContent:t.innerText,a=\"\",s=5e3,l=function(t){return a=t.substr(0,t.length-3)+a,\"...\"};c.getElementSize(t).height>n&&r.length>0&&s-- >0;)r=i?t.textContent:t.innerText,r=r.replace(/[\\s\\S](?:\\.\\.\\.)?$/,l),i?t.textContent=r:t.innerText=r;if(a.length>0){var d=document.createElement(\"span\"),p=document.createElement(\"span\");d.setAttribute(\"class\",\"okanjo-ellipses\"),p.setAttribute(\"class\",\"okanjo-visually-hidden\"),i?(d.textContent=r.substr(0,r.length-3),p.textContent=a):(d.innerText=r.substr(0,r.length-3),p.innerText=a),t.innerHTML=\"\",t.appendChild(d),t.appendChild(p)}},c.detectClasses=function(){var t=[];return-1!=navigator.appVersion.indexOf(\"MSIE 9.\")?t.push(\"lt-ie10\"):-1!=navigator.appVersion.indexOf(\"MSIE 8.\")?t.push(\"lt-ie9\"):-1!=navigator.appVersion.indexOf(\"MSIE 7.\")?t.push(\"lt-ie8\"):-1!=navigator.appVersion.indexOf(\"MSIE 6.\")&&t.push(\"lt-ie7\"),t},c.isFramed=function(){return window.top!==window.self},c.isiOS=function(){return/(iPhone|iPad|iPod)/i.test(i)},c.isAndroid=function(){return/Android/.test(i)},c.isMobile=function(){return c.isiOS()||c.isAndroid()},c.getPageArguments=function(t){var o=e(window.location.search.substring(window.location.search.indexOf(\"?\")+1));if(t){var n=e(window.location.hash.substring(Math.max(window.location.hash.indexOf(\"#\")+1,window.location.hash.indexOf(\"#!\")+2)));for(var i in n)n.hasOwnProperty(i)&&(o[i]=n[i])}return o},c.deepClone=function(t,e){var o,n=0;if(Array.isArray(t))for(e=e||[];n<t.length;n++)e.push(c.deepClone(t[n]));else if(\"object\"==typeof t){e=e||{};for(o in t)t.hasOwnProperty(o)&&(e[o]=c.deepClone(t[o]))}else e=t;return e},c.flatten=function(t){var e,o,n,i={};for(n in t)if(t.hasOwnProperty(n))if(Array.isArray(t[n]))i[n]=t[n];else if(\"object\"==typeof t[n]){e=c.flatten(t[n]);for(o in e)e.hasOwnProperty(o)&&(i[n+\"_\"+o]=e[o])}else i[n]=t[n];return i},c.shortid=function(t){var e,o,n=\"ylZM7VHLvOFcohp01x-fXNr8P_tqin6RkgWGm4SIDdK5s2TAJebzQEBUwuY9j3aC\",i=\"undefined\"!=typeof require?require(\"crypto\"):window.crypto||window.msCrypto,r=function(){if(i&&i.randomBytes)return 48&i.randomBytes(1)[0];if(!i||!i.getRandomValues)return 48&Math.floor(256*Math.random());var t=new Uint8Array(1);return i.getRandomValues(t),48&t[0]},a=function(t){for(var e,o=0,i=\"\";!e;)i+=n[t>>4*o&15|r()],e=t<Math.pow(16,o+1),o++;return i},c=1458848907498,s=6;return t=t||0,function(){var n=\"\",i=Math.floor(.001*((new Date).getTime()-c));return i===o?e++:(e=0,o=i),n=n+a(s)+a(t),e>0&&(n+=a(e)),n+=a(i)}}(),a}(okanjo||window.okanjo),config=okanjo.config=okanjo.config||{};/*! Console-polyfill. | MIT license. | https://github.com/paulmillr/console-polyfill */\n/*! Okanjo Local Storage Polyfill v1.0.0 | (c) 2013 Okanjo Partners Inc | Based on https://gist.github.com/juliocesar/926500/ddb28fb72903be87cb9044a945c6edbe1aa28b3a */\n/*! Okanjo Cookie Helper v1.0.0 | (c) 2013 Okanjo Partners Inc */\nreturn config.key=config.key||void 0,config.marketplace={uri:\"https://shop.okanjo.com\",apiUri:\"https://api.okanjo.com\",routerUri:\"https://shop.okanjo.com/widgets/router/\",balancedMarketplacePath:\"/v1/marketplaces/MP6vnNdXY7izEEVPs1gl7jSy\",socketIOUri:\"https://mke-rt.okanjo.com:13443\"},config.ads={apiUri:\"https://ads-api.okanjo.com\"},okanjo.configure=function(t){Object.keys(t).every(function(e){return config[e]&&\"object\"==typeof config[e]&&\"object\"==typeof t[e]?Object.keys(t[e]).every(function(o){return config[e][o]=t[e][t[o]],!0}):config[e]=t[e],!0})},function(t,e){var o=t.TemplateEngine=function(e){e=e||{templates:{},css:{}},this._templates=e.templates||{},this._css=e.css||{},this.classDetects=t.util.detectClasses(),this.classDetects=this.classDetects.join(\" \")};o.prototype={constructor:o,registerTemplate:function(e,o,n,i){if(\"object\"==typeof o){if(void 0===o.nodeType)throw new Error(\"Parameter template must be a string or a DOM element\");t.Mustache.parse(o)}else if(\"string\"!=typeof o)throw new Error(\"Parameter template must be a string or a DOM element\");if(3===arguments.length&&\"object\"==typeof n?(i=n,n=void 0):i=i||{},void 0!==n&&\"function\"!=typeof n)throw new Error(\"Parameter viewClosure must be a function\");this._templates[e]={markup:o,options:i,viewClosure:n||null}},registerCss:function(t,e,o){if(o=o||{},\"object\"==typeof e){if(void 0===e.nodeType)throw new Error(\"Parameter css must be a string or a DOM element\")}else if(\"string\"!=typeof e)throw new Error(\"Parameter css must be a string or a DOM element\");this._css[t]={markup:e,options:o}},isTemplateRegistered:function(t){return!!this._templates[t]},isCssRegistered:function(t){return!!this._css[t]},ensureCss:function(e){if(this._css[e]){var o=this._css[e],n=void 0===o.markup.nodeType?o.options.id||\"okanjo-css-\"+e:null;if(n){var i=t.qwery(\"#\"+n);if(0===i.length){var r=t.qwery(\"head\"),a=document.createElement(\"style\");if(a.id=n,a.setAttribute(\"type\",\"text/css\"),a.hasOwnProperty?a.innerHTML=o.markup:a.styleSheet.cssText=o.markup,r.length>0)r[0].appendChild(a);else{var c=t.qwery(\"body\");c.length>0&&c[0].appendChild(a)}}}}else console.warn('[Okanjo.Template] Attempted to add CSS template \"'+e+'\" to the DOM, however it does not appear to be registered?')},render:function(e,o,n,i){i=i||{};var r=this._templates[e],a=n;if(r.viewClosure&&(a=r.viewClosure.call(o,n,i)),a.okanjoConfig=t.config,a.okanjoMetricUrl=t.config.ads.apiUri.replace(/^https?:\\/\\//,\"\"),a.now=function(){return(new Date).getTime()},a.classDetects=this.classDetects,i.blockClasses&&Array.isArray(i.blockClasses)&&(a.classDetects=a.classDetects+=\" \"+i.blockClasses.join(\" \")),i.css!==!1&&r.options.css&&r.options.css.length>0)for(var c=0;c<r.options.css.length;c++)this.ensureCss(r.options.css[c]);return t.Mustache.render(r.markup,a)},formats:{currency:function(t,e,o,n){e=isNaN(e=Math.abs(e))?2:e,o=void 0===o?\".\":o,n=void 0===n?\",\":n;var i=0>t?\"-\":\"\",r=parseInt(t=Math.abs(+t||0).toFixed(e))+\"\",a=r.length;return a=a>3?a%3:0,i+(a?r.substr(0,a)+n:\"\")+r.substr(a).replace(/(\\d{3})(?=\\d)/g,\"$1\"+n)+(e?o+Math.abs(t-r).toFixed(e).slice(2):\"\")},product:function(e){if(\"object\"==typeof e&&Array.isArray(e)){for(var o=[],n=0;n<e.length;n++)o.push(this.product(e[n]));return o}return\"object\"==typeof e?(e.image_url=e.image_urls?e.image_urls[0]:\"\",e.escaped_buy_url=encodeURIComponent(e.buy_url),e.escaped_inline_buy_url=t.util.empty(e.inline_buy_url)?\"\":encodeURIComponent(e.inline_buy_url),e.price_formatted=this.currency(e.price),e):null}}},t.mvc=new o}(okanjo,this),function(){if(!this.JSONP){var t,e,o,n,i,r,a;o=window.encodeURIComponent,n=function(){},e=function(t){var e;return e=t.url,e+=t.url.indexOf(\"?\")<0?\"?\":\"&\",e+=i(t.data)},r=function(){return t.requestCounter+=1,(new Date).getTime()+\"_\"+t.requestCounter},i=function(t){var e,n,i;e=[];for(n in t)if(t.hasOwnProperty(n))if(i=t[n],Array.isArray(i))for(var r=0;r<i.length;r++)e.push(o(n)+\"[]=\"+o(i[r]));else if(\"object\"==typeof i)for(var a in i)i.hasOwnProperty(a)&&e.push(o(n)+\"[\"+o(a)+\"]=\"+o(i[a]));else e.push(o(n)+\"=\"+o(i));return e.join(\"&\")},t=function(t){t=t?t:{};var o,i,c,s,l,d;if(c={data:t.data||{},error:t.error||n,success:t.success||n,beforeSend:t.beforeSend||n,complete:t.complete||n,url:t.url||\"\",timeout:t.timeout||3e4},c.computedUrl=e(c),0===c.url.length)throw new Error(\"MissingUrl\");return i=!1,c.beforeSend({},c)!==!1?(o=c.data[t.callbackName||\"callback\"]=\"_okanjo_jsonp_\"+r(),window[o]=function(t){l&&clearTimeout(l),l=null,c.success(t,c),c.complete(t,c),d()},d=function(){try{return delete window[o]}catch(t){return void(window[o]=void 0)}},s=window.document.createElement(\"script\"),s.src=e(c),s.async=!0,l=setTimeout(function(){l=null;var t=new Error(\"JSONP request did not respond in time!\");return t.url=s&&s.src||null,c.error(t),d(),c.complete(t,c)},c.timeout),s.onerror=function(t){return l&&clearTimeout(l),c.error({url:s.src,event:t}),c.complete({url:s.src,event:t},c)},s.onload=s.onreadystatechange=function(){return i||this.readyState&&\"loaded\"!==this.readyState&&\"complete\"!==this.readyState?void 0:(i=!0,s.onload=s.onreadystatechange=null,s&&s.parentNode&&s.parentNode.removeChild(s),s=null)},a=a||window.document.getElementsByTagName(\"head\")[0]||window.document.documentElement,a.insertBefore(s,a.firstChild)):void 0},t.requestCounter=0,t.makeUrl=e,t.objectToURI=i,\"undefined\"!=typeof define&&null!==define&&define.amd?define(function(){return t}):\"undefined\"!=typeof module&&null!==module&&module.exports?module.exports=t:this.JSONP=t}}.call(okanjo),Object.keys||(Object.keys=function(){\"use strict\";var t=Object.prototype.hasOwnProperty,e=!{toString:null}.propertyIsEnumerable(\"toString\"),o=[\"toString\",\"toLocaleString\",\"valueOf\",\"hasOwnProperty\",\"isPrototypeOf\",\"propertyIsEnumerable\",\"constructor\"],n=o.length;return function(i){if(\"object\"!=typeof i&&(\"function\"!=typeof i||null===i))throw new TypeError(\"Object.keys called on non-object\");var r,a,c=[];for(r in i)t.call(i,r)&&c.push(r);if(e)for(a=0;n>a;a++)t.call(i,o[a])&&c.push(o[a]);return c}}()),Array.isArray||(Array.isArray=function(t){return\"[object Array]\"===Object.prototype.toString.call(t)}),Array.prototype.indexOf||(Array.prototype.indexOf=function(t,e){var o;if(null==this)throw new TypeError('\"this\" is null or not defined');var n=Object(this),i=n.length>>>0;if(0===i)return-1;var r=+e||0;if(Math.abs(r)===1/0&&(r=0),r>=i)return-1;for(o=Math.max(r>=0?r:i-Math.abs(r),0);i>o;){if(o in n&&n[o]===t)return o;o++}return-1}),Array.prototype.every||(Array.prototype.every=function(t,e){\"use strict\";var o,n;if(null==this)throw new TypeError(\"this is null or not defined\");var i=Object(this),r=i.length>>>0;if(\"function\"!=typeof t)throw new TypeError;for(arguments.length>1&&(o=e),n=0;r>n;){var a;if(n in i){a=i[n];var c=t.call(o,a,n,i);if(!c)return!1}n++}return!0}),Array.prototype.filter||(Array.prototype.filter=function(t){\"use strict\";if(void 0===this||null===this)throw new TypeError;var e=Object(this),o=e.length>>>0;if(\"function\"!=typeof t)throw new TypeError;for(var n=[],i=arguments.length>=2?arguments[1]:void 0,r=0;o>r;r++)if(r in e){var a=e[r];t.call(i,a,r,e)&&n.push(a)}return n}),function(){if(Event.prototype.preventDefault||(Event.prototype.preventDefault=function(){this.returnValue=!1}),Event.prototype.stopPropagation||(Event.prototype.stopPropagation=function(){this.cancelBubble=!0}),!Element.prototype.addEventListener){var t=[],e=function(e,o){var n=this,i=function(t){t.target=t.srcElement,t.currentTarget=n,o.handleEvent?o.handleEvent(t):o.call(n,t)};if(\"DOMContentLoaded\"==e){var r=function(t){\"complete\"==document.readyState&&i(t)};if(document.attachEvent(\"onreadystatechange\",r),t.push({object:this,type:e,listener:o,wrapper:r}),\"complete\"==document.readyState){var a=new Event;a.srcElement=window,r(a)}}else this.attachEvent(\"on\"+e,i),t.push({object:this,type:e,listener:o,wrapper:i})},o=function(e,o){for(var n=0;n<t.length;){var i=t[n];if(i.object==this&&i.type==e&&i.listener==o){\"DOMContentLoaded\"==e?this.detachEvent(\"onreadystatechange\",i.wrapper):this.detachEvent(\"on\"+e,i.wrapper),t.splice(n,1);break}++n}};Element.prototype.addEventListener=e,Element.prototype.removeEventListener=o,HTMLDocument&&(HTMLDocument.prototype.addEventListener=e,HTMLDocument.prototype.removeEventListener=o),Window&&(Window.prototype.addEventListener=e,Window.prototype.removeEventListener=o)}}(),function(t){\"use strict\";var e,o,n=t.console||{},i={},r=function(){},a=\"memory\".split(\",\"),c=\"assert,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profileEnd,time,timeEnd,trace,warn\".split(\",\");for(t.console=n;e=a.pop();)void 0===n[e]&&(n[e]=n[e]||i);for(;o=c.pop();)void 0===n[o]&&(n[o]=n[o]||r)}(this||{}),function(t,e){function o(){var t=\"test\",o=e.sessionStorage;try{return o.setItem(t,\"1\"),o.removeItem(t),!0}catch(n){return!1}}var n=null;return n=\"localStorage\"in e&&null!==e.localStorage&&o()?e.localStorage:{_data:{},length:0,_updateLen:function(){this.length=this._data.length},setItem:function(t,e){var o=this._data[t]=String(e);return this._updateLen(),o},getItem:function(t){return this._data.hasOwnProperty(t)?this._data[t]:void 0},removeItem:function(t){var e=delete this._data[t];return this._updateLen(),e},clear:function(){return this._data={}},key:function(t){return Object.keys(this._data)[t]}},t.Cache=n,n}(okanjo||this,this),function(t,e){var o=e.document||{cookie:\"\"};return t.Cookie={set:function(t,e,n){var i=new Date;i.setDate(i.getDate()+n);var r=encodeURI(e)+(n?\"; Expires=\"+i.toUTCString()+\"; Path=/\":\"\");o.cookie=t+\"=\"+r},get:function(t){var e,n,i,r=o.cookie.split(\";\");for(e=0;e<r.length;e++)if(n=r[e].substr(0,r[e].indexOf(\"=\")),i=r[e].substr(r[e].indexOf(\"=\")+1),n=n.replace(/^\\s+|\\s+$/g,\"\"),n==t)return decodeURI(i);return null}},t.Cookie}(okanjo||this,this),\"object\"!=typeof JSON&&(JSON={},function(){\"use strict\";function f(t){return 10>t?\"0\"+t:t}function quote(t){return escapable.lastIndex=0,escapable.test(t)?'\"'+t.replace(escapable,function(t){var e=meta[t];return\"string\"==typeof e?e:\"\\\\u\"+(\"0000\"+t.charCodeAt(0).toString(16)).slice(-4)})+'\"':'\"'+t+'\"'}function str(t,e){var o,n,i,r,a,c=gap,s=e[t];switch(s&&\"object\"==typeof s&&\"function\"==typeof s.toJSON&&(s=s.toJSON(t)),\"function\"==typeof rep&&(s=rep.call(e,t,s)),typeof s){case\"string\":return quote(s);case\"number\":return isFinite(s)?String(s):\"null\";case\"boolean\":case\"null\":return String(s);case\"object\":if(!s)return\"null\";if(gap+=indent,a=[],\"[object Array]\"===Object.prototype.toString.apply(s)){for(r=s.length,o=0;r>o;o+=1)a[o]=str(o,s)||\"null\";return i=0===a.length?\"[]\":gap?\"[\\n\"+gap+a.join(\",\\n\"+gap)+\"\\n\"+c+\"]\":\"[\"+a.join(\",\")+\"]\",gap=c,i}if(rep&&\"object\"==typeof rep)for(r=rep.length,o=0;r>o;o+=1)\"string\"==typeof rep[o]&&(n=rep[o],i=str(n,s),i&&a.push(quote(n)+(gap?\": \":\":\")+i));else for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(i=str(n,s),i&&a.push(quote(n)+(gap?\": \":\":\")+i));return i=0===a.length?\"{}\":gap?\"{\\n\"+gap+a.join(\",\\n\"+gap)+\"\\n\"+c+\"}\":\"{\"+a.join(\",\")+\"}\",gap=c,i}}\"function\"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+\"-\"+f(this.getUTCMonth()+1)+\"-\"+f(this.getUTCDate())+\"T\"+f(this.getUTCHours())+\":\"+f(this.getUTCMinutes())+\":\"+f(this.getUTCSeconds())+\"Z\":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\\u0000\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g,escapable=/[\\\\\\\"\\x00-\\x1f\\x7f-\\x9f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g,gap,indent,meta={\"\\b\":\"\\\\b\",\"\t\":\"\\\\t\",\"\\n\":\"\\\\n\",\"\\f\":\"\\\\f\",\"\\r\":\"\\\\r\",'\"':'\\\\\"',\"\\\\\":\"\\\\\\\\\"},rep;\"function\"!=typeof JSON.stringify&&(JSON.stringify=function(t,e,o){var n;if(gap=\"\",indent=\"\",\"number\"==typeof o)for(n=0;o>n;n+=1)indent+=\" \";else\"string\"==typeof o&&(indent=o);if(rep=e,e&&\"function\"!=typeof e&&(\"object\"!=typeof e||\"number\"!=typeof e.length))throw new Error(\"JSON.stringify\");return str(\"\",{\"\":t})}),\"function\"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(t,e){var o,n,i=t[e];if(i&&\"object\"==typeof i)for(o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n=walk(i,o),void 0!==n?i[o]=n:delete i[o]);return reviver.call(t,e,i)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return\"\\\\u\"+(\"0000\"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\\],:{}\\s]*$/.test(text.replace(/\\\\(?:[\"\\\\\\/bfnrt]|u[0-9a-fA-F]{4})/g,\"@\").replace(/\"[^\"\\\\\\n\\r]*\"|true|false|null|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?/g,\"]\").replace(/(?:^|:|,)(?:\\s*\\[)+/g,\"\")))return j=eval(\"(\"+text+\")\"),\"function\"==typeof reviver?walk({\"\":j},\"\"):j;throw new SyntaxError(\"JSON.parse\")})}()),function(){/*!\n  * @preserve Qwery - A Blazing Fast query selector engine\n  * https://github.com/ded/qwery\n  * copyright Dustin Diaz 2012\n  * MIT License\n  */\n!function(t,e,o){\"undefined\"!=typeof module&&module.exports?module.exports=o():\"function\"==typeof define&&define.amd?define(o):e[t]=o()}(\"qwery\",this,function(){function t(){this.c={}}function e(t){return K.g(t)||K.s(t,\"(^|\\\\s+)\"+t+\"(\\\\s+|$)\",1)}function o(t,e){for(var o=0,n=t.length;n>o;o++)e(t[o])}function n(t){for(var e=[],o=0,n=t.length;n>o;++o)m(t[o])?e=e.concat(t[o]):e[e.length]=t[o];return e}function i(t){for(var e=0,o=t.length,n=[];o>e;e++)n[e]=t[e];return n}function r(t){for(;(t=t.previousSibling)&&1!=t[O];);return t}function a(t){return t.match(B)}function c(t,o,n,i,r,a,c,s,d,p,u){var h,f,m,g,k;if(1!==this[O])return!1;if(o&&\"*\"!==o&&this[T]&&this[T].toLowerCase()!==o)return!1;if(n&&(f=n.match(A))&&f[1]!==this.id)return!1;if(n&&(k=n.match(S)))for(h=k.length;h--;)if(!e(k[h].slice(1)).test(this.className))return!1;if(d&&b.pseudos[d]&&!b.pseudos[d](this,u))return!1;if(i&&!c){g=this.attributes;for(m in g)if(Object.prototype.hasOwnProperty.call(g,m)&&(g[m].name||m)==r)return this}return i&&!l(a,Z(this,r)||\"\",c)?!1:this}function s(t){return Y.g(t)||Y.s(t,t.replace(R,\"\\\\$1\"))}function l(t,e,o){switch(t){case\"=\":return e==o;case\"^=\":return e.match(Q.g(\"^=\"+o)||Q.s(\"^=\"+o,\"^\"+s(o),1));case\"$=\":return e.match(Q.g(\"$=\"+o)||Q.s(\"$=\"+o,s(o)+\"$\",1));case\"*=\":return e.match(Q.g(o)||Q.s(o,s(o),1));case\"~=\":return e.match(Q.g(\"~=\"+o)||Q.s(\"~=\"+o,\"(?:^|\\\\s+)\"+s(o)+\"(?:\\\\s+|$)\",1));case\"|=\":return e.match(Q.g(\"|=\"+o)||Q.s(\"|=\"+o,\"^\"+s(o)+\"(-|$)\",1))}return 0}function d(t,e){var n,i,r,s,l,d,p,h=[],f=[],m=e,g=G.g(t)||G.s(t,t.split(V)),b=t.match(J);if(!g.length)return h;if(s=(g=g.slice(0)).pop(),g.length&&(r=g[g.length-1].match(I))&&(m=k(e,r[1])),!m)return h;for(d=a(s),l=m!==e&&9!==m[O]&&b&&/^[+~]$/.test(b[b.length-1])?function(t){for(;m=m.nextSibling;)1==m[O]&&(d[1]?d[1]==m[T].toLowerCase():1)&&(t[t.length]=m);return t}([]):m[w](d[1]||\"*\"),n=0,i=l.length;i>n;n++)(p=c.apply(l[n],d))&&(h[h.length]=p);return g.length?(o(h,function(t){u(t,g,b)&&(f[f.length]=t)}),f):h}function p(t,e,o){if(h(e))return t==e;if(m(e))return!!~n(e).indexOf(t);for(var i,r,s=e.split(\",\");e=s.pop();)if(i=G.g(e)||G.s(e,e.split(V)),r=e.match(J),i=i.slice(0),c.apply(t,a(i.pop()))&&(!i.length||u(t,i,r,o)))return!0;return!1}function u(t,e,o,n){function i(t,n,s){for(;s=F[o[n]](s,t);)if(h(s)&&c.apply(s,a(e[n]))){if(!n)return s;if(r=i(s,n-1,s))return r}}var r;return(r=i(t,e.length-1,t))&&(!n||X(r,n))}function h(t,e){return t&&\"object\"==typeof t&&(e=t[O])&&(1==e||9==e)}function f(t){var e,o,n=[];t:for(e=0;e<t.length;++e){for(o=0;o<n.length;++o)if(n[o]==t[e])continue t;n[n.length]=t[e]}return n}function m(t){return\"object\"==typeof t&&isFinite(t.length)}function g(t){return t?\"string\"==typeof t?b(t)[0]:!t[O]&&m(t)?t[0]:t:v}function k(t,e,o){return 9===t[O]?t.getElementById(e):t.ownerDocument&&((o=t.ownerDocument.getElementById(e))&&X(o,t)&&o||!X(t,t.ownerDocument)&&j('[id=\"'+e+'\"]',t)[0])}function b(t,e){var o,r,a=g(e);if(!a||!t)return[];if(t===window||h(t))return!e||t!==window&&h(a)&&X(t,a)?[t]:[];if(t&&m(t))return n(t);if(o=t.match($)){if(o[1])return(r=k(a,o[1]))?[r]:[];if(o[2])return i(a[w](o[2]));if(tt&&o[3])return i(a[_](o[3]))}return j(t,a)}function y(t,e){return function(o){var n,i;return M.test(o)?void(9!==t[O]&&((i=n=t.getAttribute(\"id\"))||t.setAttribute(\"id\",i=\"__qwerymeupscotty\"),o='[id=\"'+i+'\"]'+o,e(t.parentNode||t,o,!0),n||t.removeAttribute(\"id\"))):void(o.length&&e(t,o,!1))}}var j,v=document,x=v.documentElement,_=\"getElementsByClassName\",w=\"getElementsByTagName\",C=\"querySelectorAll\",E=\"useNativeQSA\",T=\"tagName\",O=\"nodeType\",A=/#([\\w\\-]+)/,S=/\\.[\\w\\-]+/g,I=/^#([\\w\\-]+)$/,P=/^\\.([\\w\\-]+)$/,z=/^([\\w\\-]+)$/,N=/^([\\w]+)?\\.([\\w\\-]+)$/,M=/(^|,)\\s*[>~+]/,L=/^\\s+|\\s*([,\\s\\+\\~>]|$)\\s*/g,U=/[\\s\\>\\+\\~]/,D=/(?![\\s\\w\\-\\/\\?\\&\\=\\:\\.\\(\\)\\!,@#%<>\\{\\}\\$\\*\\^'\"]*\\]|[\\s\\w\\+\\-]*\\))/,R=/([.*+?\\^=!:${}()|\\[\\]\\/\\\\])/g,q=/^(\\*|[a-z0-9]+)?(?:([\\.\\#]+[\\w\\-\\.#]+)?)/,H=/\\[([\\w\\-]+)(?:([\\|\\^\\$\\*\\~]?\\=)['\"]?([ \\w\\-\\/\\?\\&\\=\\:\\.\\(\\)\\!,@#%<>\\{\\}\\$\\*\\^]+)[\"']?)?\\]/,W=/:([\\w\\-]+)(\\(['\"]?([^()]+)['\"]?\\))?/,$=new RegExp(I.source+\"|\"+z.source+\"|\"+P.source),J=new RegExp(\"(\"+U.source+\")\"+D.source,\"g\"),V=new RegExp(U.source+D.source),B=new RegExp(q.source+\"(\"+H.source+\")?(\"+W.source+\")?\"),F={\" \":function(t){return t&&t!==x&&t.parentNode},\">\":function(t,e){return t&&t.parentNode==e.parentNode&&t.parentNode},\"~\":function(t){return t&&t.previousSibling},\"+\":function(t,e,o,n){return t?(o=r(t))&&(n=r(e))&&o==n&&o:!1}};t.prototype={g:function(t){return this.c[t]||void 0},s:function(t,e,o){return e=o?new RegExp(e):e,this.c[t]=e}};var K=new t,Y=new t,Q=new t,G=new t,X=\"compareDocumentPosition\"in x?function(t,e){return 16==(16&e.compareDocumentPosition(t))}:\"contains\"in x?function(t,e){return e=9===e[O]||e==window?x:e,e!==t&&e.contains(t)}:function(t,e){for(;t=t.parentNode;)if(t===e)return 1;return 0},Z=function(){var t=v.createElement(\"p\");return(t.innerHTML='<a href=\"#x\">x</a>')&&\"#x\"!=t.firstChild.getAttribute(\"href\")?function(t,e){return\"class\"===e?t.className:\"href\"===e||\"src\"===e?t.getAttribute(e,2):t.getAttribute(e)}:function(t,e){return t.getAttribute(e)}}(),tt=!!v[_],et=v.querySelector&&v[C],ot=function(t,e){var n,r,a=[];try{return 9!==e[O]&&M.test(t)?(o(n=t.split(\",\"),y(e,function(t,e){r=t[C](e),1==r.length?a[a.length]=r.item(0):r.length&&(a=a.concat(i(r)))})),n.length>1&&a.length>1?f(a):a):i(e[C](t))}catch(c){}return nt(t,e)},nt=function(t,n){var i,r,a,c,s,l,p=[];if(t=t.replace(L,\"$1\"),r=t.match(N)){for(s=e(r[2]),i=n[w](r[1]||\"*\"),a=0,c=i.length;c>a;a++)s.test(i[a].className)&&(p[p.length]=i[a]);return p}return o(l=t.split(\",\"),y(n,function(t,e,o){for(s=d(e,t),a=0,c=s.length;c>a;a++)(9===t[O]||o||X(s[a],n))&&(p[p.length]=s[a])})),l.length>1&&p.length>1?f(p):p},it=function(t){\"undefined\"!=typeof t[E]&&(j=t[E]&&et?ot:nt)};return it({useNativeQSA:!0}),b.configure=it,b.uniq=f,b.is=p,b.pseudos={},b}),/*! onDomReady.js 1.4.0 (c) 2013 Tubal Martin - MIT license | Wrapped in UMD by Okanjo */\nfunction(t,e){\"function\"==typeof define&&define.amd?define([],e):\"object\"==typeof exports?module.exports=e():t.onDomReady=e()}(this,function(){\"use strict\";function t(e){if(!v){if(!a.body)return n(t);for(v=!0;e=x.shift();)n(e)}}function e(e){(y||e.type===s||a[u]===p)&&(o(),t())}function o(){y?(a[b](g,e,l),r[b](s,e,l)):(a[f](k,e),r[f](d,e))}function n(t,e){setTimeout(t,+e>=0?e:1)}function i(t){v?n(t):x.push(t)}var r=window,a=r.document,c=a.documentElement,s=\"load\",l=!1,d=\"on\"+s,p=\"complete\",u=\"readyState\",h=\"attachEvent\",f=\"detachEvent\",m=\"addEventListener\",g=\"DOMContentLoaded\",k=\"onreadystatechange\",b=\"removeEventListener\",y=m in a,j=l,v=l,x=[];if(a[u]===p)n(t);else if(y)a[m](g,e,l),r[m](s,e,l);else{a[h](k,e),r[h](d,e);try{j=null==r.frameElement&&c}catch(_){}j&&j.doScroll&&!function w(){if(!v){try{j.doScroll(\"left\")}catch(e){return n(w,50)}o(),t()}}()}return i.version=\"1.4.0\",i.isReady=function(){return v},i}),/*!\n * mustache.js - Logic-less {{mustache}} templates with JavaScript\n * http://github.com/janl/mustache.js\n */\nfunction(t,e){\"object\"==typeof exports&&exports?e(exports):\"function\"==typeof define&&define.amd?define([\"exports\"],e):e(t.Mustache={})}(this,function(t){function e(t){return\"function\"==typeof t}function o(t){return t.replace(/[\\-\\[\\]{}()*+?.,\\\\\\^$|#\\s]/g,\"\\\\$&\")}function n(t,e){return f.call(t,e)}function i(t){return!n(m,t)}function r(t){return String(t).replace(/[&<>\"'\\/]/g,function(t){return g[t]})}function a(e,n){function r(){if(x&&!_)for(;g.length;)delete m[g.pop()];else g=[];x=!1,_=!1}function a(t){if(\"string\"==typeof t&&(t=t.split(b,2)),!h(t)||2!==t.length)throw new Error(\"Invalid tags: \"+t);d=new RegExp(o(t[0])+\"\\\\s*\"),p=new RegExp(\"\\\\s*\"+o(t[1])),u=new RegExp(\"\\\\s*\"+o(\"}\"+t[1]))}if(!e)return[];var d,p,u,f=[],m=[],g=[],x=!1,_=!1;a(n||t.tags);for(var w,C,E,T,O,A,S=new l(e);!S.eos();){if(w=S.pos,E=S.scanUntil(d))for(var I=0,P=E.length;P>I;++I)T=E.charAt(I),i(T)?g.push(m.length):_=!0,m.push([\"text\",T,w,w+1]),w+=1,\"\\n\"===T&&r();if(!S.scan(d))break;if(x=!0,C=S.scan(v)||\"name\",S.scan(k),\"=\"===C?(E=S.scanUntil(y),S.scan(y),S.scanUntil(p)):\"{\"===C?(E=S.scanUntil(u),S.scan(j),S.scanUntil(p),C=\"&\"):E=S.scanUntil(p),!S.scan(p))throw new Error(\"Unclosed tag at \"+S.pos);if(O=[C,E,w,S.pos],m.push(O),\"#\"===C||\"^\"===C)f.push(O);else if(\"/\"===C){if(A=f.pop(),!A)throw new Error('Unopened section \"'+E+'\" at '+w);if(A[1]!==E)throw new Error('Unclosed section \"'+A[1]+'\" at '+w)}else\"name\"===C||\"{\"===C||\"&\"===C?_=!0:\"=\"===C&&a(E)}if(A=f.pop())throw new Error('Unclosed section \"'+A[1]+'\" at '+S.pos);return s(c(m))}function c(t){for(var e,o,n=[],i=0,r=t.length;r>i;++i)e=t[i],e&&(\"text\"===e[0]&&o&&\"text\"===o[0]?(o[1]+=e[1],o[3]=e[3]):(n.push(e),o=e));return n}function s(t){for(var e,o,n=[],i=n,r=[],a=0,c=t.length;c>a;++a)switch(e=t[a],e[0]){case\"#\":case\"^\":i.push(e),r.push(e),i=e[4]=[];break;case\"/\":o=r.pop(),o[5]=e[2],i=r.length>0?r[r.length-1][4]:n;break;default:i.push(e)}return n}function l(t){this.string=t,this.tail=t,this.pos=0}function d(t,e){this.view=null==t?{}:t,this.cache={\".\":this.view},this.parent=e}function p(){this.cache={}}var u=Object.prototype.toString,h=Array.isArray||function(t){return\"[object Array]\"===u.call(t)},f=RegExp.prototype.test,m=/\\S/,g={\"&\":\"&amp;\",\"<\":\"&lt;\",\">\":\"&gt;\",'\"':\"&quot;\",\"'\":\"&#39;\",\"/\":\"&#x2F;\"},k=/\\s*/,b=/\\s+/,y=/\\s*=/,j=/\\s*\\}/,v=/#|\\^|\\/|>|\\{|&|=|!/;l.prototype.eos=function(){return\"\"===this.tail},l.prototype.scan=function(t){var e=this.tail.match(t);if(!e||0!==e.index)return\"\";var o=e[0];return this.tail=this.tail.substring(o.length),this.pos+=o.length,o},l.prototype.scanUntil=function(t){var e,o=this.tail.search(t);switch(o){case-1:e=this.tail,this.tail=\"\";break;case 0:e=\"\";break;default:e=this.tail.substring(0,o),this.tail=this.tail.substring(o)}return this.pos+=e.length,e},d.prototype.push=function(t){return new d(t,this)},d.prototype.lookup=function(t){var o,n=this.cache;if(t in n)o=n[t];else{for(var i,r,a=this;a;){if(t.indexOf(\".\")>0)for(o=a.view,i=t.split(\".\"),r=0;null!=o&&r<i.length;)o=o[i[r++]];else\"object\"==typeof a.view&&(o=a.view[t]);if(null!=o)break;a=a.parent}n[t]=o}return e(o)&&(o=o.call(this.view)),o},p.prototype.clearCache=function(){this.cache={}},p.prototype.parse=function(t,e){var o=this.cache,n=o[t];return null==n&&(n=o[t]=a(t,e)),n},p.prototype.render=function(t,e,o){var n=this.parse(t),i=e instanceof d?e:new d(e);return this.renderTokens(n,i,o,t)},p.prototype.renderTokens=function(t,e,o,n){for(var i,r,a,c=\"\",s=0,l=t.length;l>s;++s)a=void 0,i=t[s],r=i[0],\"#\"===r?a=this._renderSection(i,e,o,n):\"^\"===r?a=this._renderInverted(i,e,o,n):\">\"===r?a=this._renderPartial(i,e,o,n):\"&\"===r?a=this._unescapedValue(i,e):\"name\"===r?a=this._escapedValue(i,e):\"text\"===r&&(a=this._rawValue(i)),void 0!==a&&(c+=a);return c},p.prototype._renderSection=function(t,o,n,i){function r(t){return a.render(t,o,n)}var a=this,c=\"\",s=o.lookup(t[1]);if(s){if(h(s))for(var l=0,d=s.length;d>l;++l)c+=this.renderTokens(t[4],o.push(s[l]),n,i);else if(\"object\"==typeof s||\"string\"==typeof s)c+=this.renderTokens(t[4],o.push(s),n,i);else if(e(s)){if(\"string\"!=typeof i)throw new Error(\"Cannot use higher-order sections without the original template\");s=s.call(o.view,i.slice(t[3],t[5]),r),null!=s&&(c+=s)}else c+=this.renderTokens(t[4],o,n,i);return c}},p.prototype._renderInverted=function(t,e,o,n){var i=e.lookup(t[1]);return!i||h(i)&&0===i.length?this.renderTokens(t[4],e,o,n):void 0},p.prototype._renderPartial=function(t,o,n){if(n){var i=e(n)?n(t[1]):n[t[1]];return null!=i?this.renderTokens(this.parse(i),o,n,i):void 0}},p.prototype._unescapedValue=function(t,e){var o=e.lookup(t[1]);return null!=o?o:void 0},p.prototype._escapedValue=function(e,o){var n=o.lookup(e[1]);return null!=n?t.escape(n):void 0},p.prototype._rawValue=function(t){return t[1]},t.name=\"mustache.js\",t.version=\"1.1.0\",t.tags=[\"{{\",\"}}\"];var x=new p;t.clearCache=function(){return x.clearCache()},t.parse=function(t,e){return x.parse(t,e)},t.render=function(t,e,o){return x.render(t,e,o)},t.to_html=function(o,n,i,r){var a=t.render(o,n,i);return e(r)?void r(a):a},t.escape=r,t.Scanner=l,t.Context=d,t.Writer=p})}.apply(okanjo),function(t,e){function o(){this.default_channel=this.channel.external,this._queue=[],this.pageId=t.util.shortid();var e=t.util.getPageArguments(!0),o=e[this.msid_key],n=t.Cookie.get(this.msid_key),i=e[this.source_cx],r=e[this.source_ch];o&&n&&o!=n&&(this.trackEvent(this.object_type.metric_session,this.event_type.correlation,{id:o+\"_\"+n,ch:this.default_channel,_noProcess:!0}),t.Cookie.set(this.msid_key,o,this.msid_ttl)),this.sid=o||n||null,this.sourceCh=r||null,this.sourceCx=i||null,this._lastKey=void 0}o.prototype={msid_key:\"ok_msid\",source_cx:\"ok_cx\",source_ch:\"ok_ch\",msid_ttl:1460,strip_meta:[\"key\",\"callback\",\"metrics_channel_context\",\"metrics_context\",\"mode\"],constructor:o,event_type:{view:\"vw\",impression:\"imp\",interaction:\"int\",correlation:\"cor\"},action:{click:\"click\",inline_click:\"inline_click\"},object_type:{thirdparty_ad:\"ta\",cart:\"ct\",page:\"pg\",widget:\"wg\",product:\"pr\",store:\"st\",cause:\"ca\",marketplace:\"mp\",order:\"or\",order_item:\"oi\",user:\"ur\",metric_session:\"mt\"},channel:{product_widget:\"pw\",ad_widget:\"aw\",store_widget:\"sw\",marketplace:\"mp\",external:\"ex\"},environment:{live:\"live\",testing:\"testing\"},trackEvent:function(e,o,n,i){n=n||{},n.object_type=e,n.event_type=o,this._lastKey=n.key||n.key||n.m&&n.m.key||t.key||this._lastKey||void 0,this.push(n,i)},trackPageView:function(t,o){t=t||{},t.id=t.id||e.location.href,t.ch=t.ch||this.default_channel,this.trackEvent(this.object_type.page,this.event_type.view,t,o)},track:function(e,o){if(!e||\"object\"!=typeof e)return void console.warn(\"[Okanjo.Metrics] event object data required\");if(!e.object_type)return void console.warn(\"[Okanjo.Metrics] object_type required\");if(!e.event_type)return void console.warn(\"[Okanjo.Metrics] event_type required\");var n=e.object_type,i=e.event_type;if(delete e.object_type,delete e.event_type,e.key=e.key||e.m&&e.m.key||t.key||this._lastKey||void 0,this.sid&&(e.sid=this.sid),e.m){var r={};for(var a in e.m)e.m.hasOwnProperty(a)&&this.strip_meta.indexOf(a)<0&&(r[a]=e.m[a]);e.m=r}else e.m={};(this.sourceCh||this.sourceCx)&&(this.sourceCh&&(e.m.ref_ch=this.sourceCh),this.sourceCx&&(e.m.ref_cx=this.sourceCx)),e.m.pgid=this.pageId,document.referrer&&(e.ref=document.referrer),t.exec(t.getRoute(t.routes.metrics,{object_type:n,event_type:i}),e,function(t,e){t&&console.warn(\"[Okanjo.Metrics] Reporting failed\",t,e),o&&o(t,e)})},updateSid:function(e){!this.sid&&e&&(this.sid=e,t.Cookie.set(this.msid_key,e,this.msid_ttl))},push:function(t,e){this._queue.push({event:t,callback:e}),t._noProcess?delete t._noProcess:this._processQueue()},_processQueue:function(){if(!this._processTimeout&&this._queue.length>0){var t=this;this._processTimeout=setTimeout(function(){var e=t._queue.shift();void 0===e?t._processTimeout=null:t.track(e.event,function(o,n){n&&n.data&&n.data.sid&&t.updateSid(n.data.sid),t._processTimeout=null,t._processQueue(),e.callback&&e.callback(o,n)})},0)}},includeElementInfo:function(e,o){var n=t.util.getPageSize(),i=t.util.getElementPosition(e);return o=o||{},o.pw=n.w,o.ph=n.h,o.x1=i.x1,o.y1=i.y1,o.x2=i.x2,o.y2=i.y2,o},includeViewportInfo:function(e){var o=t.util.getViewportSize(),n=t.util.getScrollPosition();return e=e||{},e.vx1=n.x,e.vy1=n.y,e.vx2=e.vx1+o.vw,e.vy2=e.vy1+o.vh,e},includeEventInfo:function(e,o){var n=t.util.getEventPosition(e);return o.ex=n.ex,o.ey=n.ey,o},copy:function(e,o){return t.util.flatten(t.util.deepClone(e,o))}},t.metrics=new o}(okanjo,this),function(t,e){t.metrics.trackPageView({_noProcess:!0}),setTimeout(function(){t.metrics._processQueue()},1e3)}(okanjo||this),function(t,e){var o=function(t,e){return t.indexOf(e)},n=function(){this.events={}};return n.prototype.on=function(t,e){\"object\"!=typeof this.events[t]&&(this.events[t]=[]),this.events[t].push(e)},n.prototype.removeListener=function(t,e){var n;\"object\"==typeof this.events[t]&&(n=o(this.events[t],e),n>-1&&this.events[t].splice(n,1))},n.prototype.emit=function(t){var e,o,n,i=[].slice.call(arguments,1);if(\"object\"==typeof this.events[t])for(o=this.events[t].slice(),n=o.length,e=0;n>e;e++)o[e].apply(this,i)},n.prototype.once=function(t,e){this.on(t,function o(){this.removeListener(t,o),e.apply(this,arguments)})},t._EventEmitter=n,n}(okanjo,this),function(t,e){var o=t.Cache,n=t._Widget=function(e,o){if(t._EventEmitter.call(this),!e||\"object\"!=typeof e||void 0===e.nodeType)throw new Error(\"Invalid element - must be a valid DOM element\");if(\"undefined\"!=typeof o&&\"object\"!=typeof o)throw new Error(\"Invalid configuration, must be an object or nothing at all, got: \"+typeof o);o=o||{},this.instanceId=t.util.shortid(),this.element=e,this.config=o||{},this.configMap={},this.templates={error:\"okanjo.error\"},this.css={}};t.util.inherits(n,t._EventEmitter);var i=n.prototype;return i.widgetName=\"BaseWidget\",i.config=null,i.use_cache=!1,i.cache_key_prefix=\"ok_widget_\",i.cache_ttl=6e4,i.cacheKeyAttributes=\"id\".split(\",\"),i.init=function(){this.parseConfiguration(),this.processTemplateOverrides(),this.ensureTemplates(),this.findWidgetKey()&&this.load()&&this.autoCleanCache()},i.findWidgetKey=function(){return t.util.empty(this.config.key)?t.util.empty(t.key)?t.util.empty(this.key)?(this.config.key=this.key,!0):(this.element.innerHTML=t.mvc.render(this.templates.error,this,{message:\"Missing Okanjo key.\"}),t.report(this.widgetName,\"Missing key. Define one using okanjo.configure or pass the key parameter as an option in the \"+this.widgetName+\" constructor\"),!1):(this.key=t.key,this.config.key=this.key,!0):(this.key=this.config.key,this.config.key=this.key,!0)},i.processTemplateOverrides=function(){var t;for(var e in this.config)this.config.hasOwnProperty(e)&&(t=e.match(/^template_(.+)$/),null!==t&&this.templates.hasOwnProperty(t[1])?this.templates[t[1]]=this.config[e]:(t=e.match(/^css_(.+)$/),null!==t&&this.css.hasOwnProperty(t[1])&&(this.css[t[1]]=this.config[e])))},i.ensureTemplates=function(){var e,o=this.templates,n=this.css;for(e in o)if(o.hasOwnProperty(e)&&!t.mvc.isTemplateRegistered(o[e]))throw new Error(\"[Okanjo.\"+this.widgetName+\"] Missing template: \"+o[e]+\". Did you forget to include the template?\");for(e in n)if(n.hasOwnProperty(e)&&!t.mvc.isCssRegistered(n[e]))throw new Error(\"[Okanjo.\"+this.widgetName+\"] Missing css block: \"+n[e]+\". Did you forget to include the css template?\")},i.parseConfiguration=function(){var e=t.util.data(this.element);t.util.copyIfSetMap(this.config,e,this.configMap,{stripEmpty:!0})},i.load=function(){return!0},i.autoCleanCache=function(){if(this.use_cache){var t=this;setTimeout(function(){t.cleanCache()},2e3)}},i.getCurrentPageUrl=function(){var t=e.location.href,o=[t.indexOf(\"?\"),t.indexOf(\"#\")].filter(function(t){return t>=0}),n=o.length>0?Math.min.apply(null,o):-1;return n>0?t.substr(0,n):t},i.getCacheKey=function(){for(var o=[e.location.host+e.location.pathname],n=this.cacheKeyAttributes,i=0;i<n.length;i++)void 0!==this.config[n[i]]&&o.push(n[i],this.config[n[i]]);return this.cache_key_prefix+t.util.hash(o.join(\";\"))},i.cleanCache=function(){try{for(var e=(new Date).getTime(),n=[],i=[],r=0;r<o.length;r++){var a=o.key(r);if(0===a.indexOf(this.cache_key_prefix)&&a.indexOf(\"_expires\")<0){var c=o.getItem(a+\"_expires\");null!==c&&e<parseInt(c)?i.push(a+\"_expires\"):(o.removeItem(a),o.removeItem(a+\"_expires\"))}else a.indexOf(\"_expires\")>=0&&n.push(a)}for(r=0;r<n.length;r++)i.indexOf(n[r])<0&&o.removeItem(n[r])}catch(s){t.report(this.widgetName,s)}},i.loadFromCache=function(e){try{var n=o.getItem(e),i=o.getItem(e+\"_expires\"),r=(new Date).getTime();if(null!==n&&null!==i&&r<parseInt(i))return JSON.parse(n);o.removeItem(e),o.removeItem(e+\"_expires\")}catch(a){t.report(this.widgetName,a)}return null},i.saveInCache=function(t,e){var n=this;setTimeout(function(){o.setItem(t,JSON.stringify(e)),o.setItem(t+\"_expires\",(new Date).getTime()+n.cache_ttl)},100)},t._Widget}(okanjo,this),function(t,e){var o,n,i,r,a,c,s,l,d,p=!1,u=null,h=!!navigator.userAgent.match(/iphone|android|blackberry/gi)||!1,f=function(){o=t.qwery(\"html\")[0],n=t.qwery(\"body\")[0]||document.body,i=document.createElement(\"div\"),r=document.createElement(\"div\"),a=document.createElement(\"div\"),c=document.createElement(\"div\"),s=document.createElement(\"div\"),l=document.createElement(\"div\"),d=document.createElement(\"iframe\"),i.setAttribute(\"class\",\"okanjo-modal-container okanjo-modal-hidden \"+t.util.detectClasses().join(\" \")),r.setAttribute(\"class\",\"okanjo-modal-window\"),a.setAttribute(\"class\",\"okanjo-modal-window-skin\"),c.setAttribute(\"class\",\"okanjo-modal-window-outer\"),s.setAttribute(\"class\",\"okanjo-modal-window-inner\"),l.setAttribute(\"class\",\"okanjo-modal-close-button\"),d.setAttribute(\"class\",\"okanjo-inline-buy-frame\"),d.setAttribute(\"frameborder\",\"0\"),d.setAttribute(\"vspace\",\"0\"),d.setAttribute(\"hspace\",\"0\"),d.setAttribute(\"webkitallowfullscreen\",\"\"),d.setAttribute(\"mozallowfullscreen\",\"\"),d.setAttribute(\"allowfullscreen\",\"\"),d.setAttribute(\"scrolling\",\"auto\"),l.innerHTML=\"×\",s.appendChild(d),c.appendChild(s),a.appendChild(c),r.appendChild(a),r.appendChild(l),i.appendChild(r),n.appendChild(i)},m=function(){g(e,\"orientationchange\",function(){for(var t=0;2>t;t++)setTimeout(j,1e3*t+10)}),g(e,\"resize\",function(){setTimeout(j,100)}),g(i,\"click\",x),g(r,\"click\",function(t){t.preventDefault(),t.stopPropagation()}),g(l,\"click\",function(t){t.preventDefault(),t.stopPropagation(),x()})},g=function(t,e,o){t.addEventListener?t.addEventListener(e,o,!1):t.attachEvent(\"on\"+e,o)},k=function(t,e){t.className+=\" \"+e},b=function(t,e){t.className=t.className.replace(new RegExp(\" *?\"+e),\"\")},y=function(){return e.innerHeight||document.documentElement.clientHeight},j=function(){u=t.util.getScrollPosition().y,r.style.height=y()-80+\"px\"},v=function(){u=document.body.scrollTop,b(i,\"okanjo-modal-hidden\"),k(i,\"okanjo-modal-fade-out\"),j(),k(o,\"okanjo-modal-active\"),h||k(o,\"okanjo-modal-margin-fix\"),setTimeout(function(){b(i,\"okanjo-modal-fade-out\")},10)},x=function(){k(i,\"okanjo-modal-fade-out\"),setTimeout(function(){b(i,\"okanjo-modal-fade-out\"),k(i,\"okanjo-modal-hidden\"),b(o,\"okanjo-modal-active\"),h||b(o,\"okanjo-modal-margin-fix\")},210)},_=function(t){s.innerHTML=\"\",\"string\"==typeof t?s.innerHTML=t:s.appendChild(t)};return t.modal={show:function(t){p||(p=!0,f(),m()),_(t),v()},hide:function(){x()}},t.modal}(okanjo,this),function(t,e){function o(e,n){t._Widget.call(this,e,n),this.items=[],this.config=n=n||{mode:o.contentTypes.browse,use_cache:!0,cache_ttl:6e4},this.config.nag=void 0===n.nag?!0:n.nag===!0,this.config.use_cache=void 0===n.use_cache?!0:n.use_cache===!0,this.config.cache_ttl=void 0===n.cache_ttl?6e4:n.cache_ttl,this.disable_popup=n.disable_popup===!0,this.use_cache=this.config.use_cache,this.cache_ttl=this.config.cache_ttl,this.proxy_url=null,this.config.metrics_context=void 0===n.metrics_context?\"pw\":n.metrics_context,this.config.metrics_channel_context=void 0===n.metrics_channel_context?null:n.metrics_channel_context,this.disable_inline_buy=void 0===this.config.disable_inline_buy?!1:n.disable_inline_buy===!0,this.cache_key_prefix=\"ok_product_block_\",this.templates={product_error:\"okanjo.error\",product_main:\"product.block\"},this.css={product_main:\"product.block\",product_modal:\"okanjo.modal\"},this.configMap={key:\"key\",mode:\"mode\",disable_inline_buy:\"disable-inline-buy\",proxy_url:\"proxy-url\",url:\"url\",selectors:\"selectors\",text:\"text\",id:\"id\",q:\"q\",marketplace_status:[\"marketplace-status\"],marketplace_id:[\"marketplace-id\"],pools:\"pools\",external_id:\"external-id\",sku:\"sku\",sold_by:\"sold-by\",external_store_id:\"external-store-id\",min_price:\"min-price\",max_price:\"max-price\",condition:\"condition\",manufacturer:\"manufacturer\",upc:\"upc\",isbn:\"isbn\",tags:\"tags\",category:\"category\",min_donation_percent:\"min-donation-percent\",max_donation_percent:\"max-donation-percent\",donation_to:\"donation-to\",suboptimal:\"suboptimal\",backfill:\"backfill\",skip:[\"skip\",\"page-start\"],take:[\"take\",\"page-size\"],expandable:\"expandable\",template_product_main:\"template-product-main\",template_product_error:\"template-product-error\",size:\"size\",template_layout:\"template-layout\",template_theme:\"template-theme\",template_cta_style:\"template-cta-style\",template_cta_text:\"template-cta-text\",template_cta_color:\"template-cta-color\"},n.no_init||this.init()}function n(t,e,o,n){var i,r=[],a=e.indexOf(\"?\")<0?\"?\":\"&\";for(i in n)n.hasOwnProperty(i)&&r.push(i+\"=\"+encodeURIComponent(n[i]));var c=t+\"&n=\"+(new Date).getTime()+\"&u=\",s=e+(r.length>0?a+r.join(\"&\"):\"\");return o?c+encodeURIComponent(o+encodeURIComponent(s)):c+encodeURIComponent(s)}t.util.inherits(o,t._Widget),o.contentTypes={browse:\"browse\",sense:\"sense\",single:\"single\"};var i=o.prototype;return i.widgetName=\"Product\",i.cacheKeyAttributes=\"mode,url,selectors,text,id,q,marketplace_status,marketplace_id,external_id,sku,sold_by,min_price,max_price,condition,manufacturer,upc,isbn,tags,category,min_donation_percent,max_donation_percent,donation_to,suboptimal,skip,take\".split(\",\"),i.load=function(){return this.config.id||this.config.mode==o.contentTypes.single?t.util.empty(this.config.id)?this.config.mode=o.contentTypes.browse:this.config.mode=o.contentTypes.single:this.config.url||this.config.text||this.config.mode==o.contentTypes.sense?(t.util.empty(this.config.url)&&t.util.empty(this.config.text)&&(this.config.url=this.getCurrentPageUrl(),this.config.nag&&console.info(\"[Okanjo.\"+this.widgetName+\"] No canonical url given for ProductSense. We recommend using a canonical url to ensure page visibility by Okanjo. Using derived url:\",this.config.url)),this.config.mode=o.contentTypes.sense,this.config.take=this.config.take||5):this.config.mode=t.util.empty(this.config.mode)?o.contentTypes.browse:this.config.mode,function(t){for(var e=0;e<t.length;e++){var o=this.config[t[e]];o&&\"string\"==typeof o&&(this.config[t[e]]=o.split(\",\"))}}.call(this,[\"pools\",\"tags\",\"category\"]),null===this.config.metrics_channel_context&&(this.config.metrics_channel_context=this.config.mode),this.config.proxy_url&&(this.proxy_url=this.config.proxy_url,delete this.config.proxy_url),this.config.use_cache&&this.loadProductsFromCache()?this.emit(\"load\",{fromCache:!0}):this.getProducts(),this.config.disable_inline_buy&&\"string\"==typeof this.config.disable_inline_buy&&(this.disable_inline_buy=\"true\"===this.config.disable_inline_buy.toLowerCase()),this.config.metrics_context==t.metrics.channel.product_widget&&t.metrics.trackEvent(t.metrics.object_type.widget,t.metrics.event_type.impression,{ch:this.config.metrics_context,cx:this.config.metrics_channel_context||this.config.mode,m:t.metrics.copy(this.config,t.metrics.includeElementInfo(this.element,{wgid:this.instanceId}))}),!0},i.loadProductsFromCache=function(){var t=this.loadFromCache(this.getCacheKey());return null!==t?(this.items=t,this.showProducts(this.items),!0):!1},i.getProducts=function(){var e,n=this;this.executeSearch(function(i,r){if(i)console.error(\"[Okanjo.\"+n.widgetName+\"] Failed to retrieve products.\",i),n.element.innerHTML=t.mvc.render(n.templates.product_error,n,{message:\"Could not retrieve products.\"}),n.emit(\"error\",i);else if(e=(r.data||[]).length,0===e&&n.emit(\"empty\"),n.config.backfill&&n.config.mode==o.contentTypes.sense&&0===e)n.backfillAd();else{if(n.items=r.data,n.numFound=r.numFound,n.articleId=r.articleId,n.placementTest=r.placementTest,n.shorted=n.config.mode==o.contentTypes.sense&&n.config.take>e,n.emit(\"data\",r),n.showProducts(n.items),!n.shorted&&n.use_cache&&(!n.placementTest||n.placementTest&&!n.placementTest.enabled)){var a=n.getCacheKey();n.saveInCache(a,n.items)}n.emit(\"load\",{fromCache:!1})}})},i.executeSearch=function(e){this.config.mode===o.contentTypes.sense?t.exec(t.getRoute(t.routes.products_sense),this.config,e):this.config.mode===o.contentTypes.single?t.exec(t.getRoute(t.routes.products_id,{product_id:this.config.id}),this.config,function(t,o){!t&&o&&o.data&&(o.data=[o.data]),e&&e(t,o)}):t.exec(t.getRoute(t.routes.products),this.config,e)},i.handleInlineBuyOption=function(){if(this.disable_inline_buy)for(var t=0;t<this.items.length;t++)this.items[t].inline_buy_url=null},i.showProducts=function(e){this.handleInlineBuyOption(),this.element.innerHTML=t.mvc.render(this.templates.product_main,this,{products:e||this.items||[],config:this.config}),this.bindEvents()},o.interactTile=function(o,i){var r=this.getAttribute(\"data-inline-buy-url\"),a=this.getAttribute(\"data-expandable\"),c=!t.util.empty(r),s=this.getAttribute(\"data-disable-popup\")||!1,l=s?!1:t.util.isMobile()&&c,d=this.getAttribute(\"href\"),p=this.getAttribute(\"instance-id\"),u={},h=!1,f=function(e,o){var n={m:t.metrics.includeEventInfo(o,t.metrics.includeViewportInfo(t.metrics.includeElementInfo(e)))},i=e.getAttribute(\"data-placement-enabled\"),r=e.getAttribute(\"data-placement-test\"),a=e.getAttribute(\"data-placement-seed\"),c=e.getAttribute(\"data-article-id\");return i&&(n.m.pten=i),r&&(n.m.ptid=r),a&&(n.m.ptseed=a),c&&(n.m.aid=c),n.m.wgid=p,n}(this,o),m=(this.getAttribute(\"id\"),this.getAttribute(\"data-buy-url\")),g=this.getAttribute(\"data-metric-url\")+\"&sid=\"+t.metrics.sid+\"&\"+t.JSONP.objectToURI(f),k=this.getAttribute(\"data-proxy-url\"),b=\"ok_msid=\"+t.metrics.sid+\"&ok_ch=\"+this.getAttribute(\"data-channel\")+\"&ok_cx=\"+this.getAttribute(\"data-context\"),y=m+(m.indexOf(\"?\")<0?\"?\":\"&\")+b,j=r+(r.indexOf(\"?\")<0?\"?\":\"&\")+b;if(l)g+=\"&ea=\"+t.metrics.action.inline_click+\"&m[popup]=true\",d=n(g,j,k,{popup:1}),t.active_frame=e.open(d,\"okanjo-inline-buy-frame\",\"width=400,height=400,location=yes,resizable=yes,scrollbars=yes\"),t.active_frame?o.preventDefault():(console.error(\"Popup blocker prevented new inline-buy experience from being displayed\"),this.href=d);else if(c){o.preventDefault();var v=document.createElement(\"iframe\"),x={\"class\":\"okanjo-inline-buy-frame\",frameborder:0,vspace:0,hspace:0,webkitallowfullscreen:\"\",mozallowfullscreen:\"\",allowfullscreen:\"\",scrolling:\"auto\"};for(var _ in x)x.hasOwnProperty(_)&&v.setAttribute(_,x[_]);if(u.expandable=1,void 0!==a&&\"false\"===a.toLowerCase()){for(var w=this,C=null;w;)w=w.parentNode,w&&w.className&&w.className.indexOf(\"okanjo-expansion-root\")>=0&&(C=w);if(C){v.className+=\" okanjo-ad-in-unit\",v.setAttribute(\"height\",\"100%\"),v.setAttribute(\"width\",\"100%\"),C.appendChild(v),h=!0;var E=t.util.getElementSize(C);u.expandable=0,u.frame_height=E.height,u.frame_width=E.width,u.ad_size=C.getAttribute(\"data-size\")||\"undefined\"}}g+=\"&ea=\"+t.metrics.action.inline_click+\"&m[expandable]=\"+(1===u.expandable?\"true\":\"false\"),d=n(g,j,k,u),v.src=d,h||t.modal.show(v)}else i?(g+=\"&ea=\"+t.metrics.action.click,this.href=n(g,y,k,{}),this.click()):(g+=\"&ea=\"+t.metrics.action.click,this.href=n(g,y,k,{}))},i.bindEvents=function(){var e=this;t.qwery(\"a\",this.element).every(function(n){var i=n.getAttribute(\"data-id\");if(i&&(n.addEventListener?n.addEventListener(\"click\",o.interactTile):n.attachEvent(\"onclick\",function(t){o.interactTile.call(n,t)}),e.config.metrics_context==t.metrics.channel.product_widget)){var r={},a=n.getAttribute(\"data-placement-enabled\"),c=n.getAttribute(\"data-placement-test\"),s=n.getAttribute(\"data-placement-seed\"),l=n.getAttribute(\"data-article-id\");a&&(r.pten=a),c&&(r.ptid=c),s&&(r.ptseed=s),l&&(r.aid=l),r.wgid=e.instanceId,t.metrics.trackEvent(t.metrics.object_type.product,t.metrics.event_type.impression,{id:i,ch:e.config.metrics_context,cx:e.config.metrics_channel_context||e.config.mode,m:t.metrics.copy(e.config,t.metrics.includeElementInfo(n.parentNode,r))})}return!0}),t.qwery(\".okanjo-product-title\",this.element).every(function(e){return t.util.ellipsify(e),!0})},i.guessAdSize=function(){for(var e,o,n,i,r=[],a=0,c=\"300x250|728x90|250x250|200x200|120x240|468x60|180x150|320x50|125x125|234x60\".split(\"|\");a<this.config.take;a++)r.push({});for(this.showProducts(r),e=t.util.getElementSize(this.element),this.element.innerHTML=\"\",e.width+=1,e.height+=1,a=0;a<c.length;a++)if(o=c[a].split(\"x\"),n=parseInt(o[0]),i=parseInt(o[1]),n<=e.width&&i<=e.height)return{width:n,height:i};return null},i.backfillAd=function(){var e,o=this.config.backfill,n=null;\"string\"==typeof o&&(t.Ad&&(n=t.Ad.sizes[o]),n||(e=/^([0-9]+)x([0-9]+)$/i.exec(o))&&(n={width:e[1],height:e[2]})),n||(n=this.guessAdSize()),n?this.loadAd(n):console.error(\"[Okanjo.\"+this.widgetName+\"] Failed to backfill ad: Unable to match ad size to widget dimensions\")},i.loadAd=function(o){var n=document.createElement(\"iframe\"),i={\"class\":\"okanjo-inline-buy-frame\",frameborder:0,vspace:0,hspace:0,webkitallowfullscreen:\"\",mozallowfullscreen:\"\",allowfullscreen:\"\",scrolling:\"auto\"},r=\"ca-pub-9976681432228271\",a=\"3992956792\",c='<html><head><style type=\"text/css\">html,body {margin: 0; padding: 0;}</style></head><body><script type=\"text/javascript\">google_ad_client = \"'+r+'\";google_ad_slot = \"'+a+'\";google_ad_width = '+o.width+\";google_ad_height = \"+o.height+';google_page_url = \"'+e.location.href+'\";</script><script type=\"text/javascript\" src=\"//pagead2.googlesyndication.com/pagead/show_ads.js\"></script></body></html>';this.element.innerHTML=\"\",this.element.appendChild(n),n.contentWindow.document.open(),n.contentWindow.document.write(c),n.contentWindow.document.close();for(var s in i)i.hasOwnProperty(s)&&n.setAttribute(s,i[s]);n.className=\"okanjo-ad-backfill\",n.setAttribute(\"width\",o.width+\"px\"),n.setAttribute(\"height\",o.height+\"px\");var l={wgid:this.instanceId,pten:this.placementTest&&this.placementTest.enabled?1:0};this.placementTest&&(this.placementTest.id&&(l.ptid=this.placementTest.id),this.placementTest.seed&&(l.ptseed=this.placementTest.seed)),this.articleId&&(l.aid=this.articleId),t.metrics.trackEvent(t.metrics.object_type.thirdparty_ad,t.metrics.event_type.impression,{ch:this.config.metrics_context,cx:this.config.metrics_channel_context||this.config.mode,m:t.metrics.copy(this.config,t.metrics.includeElementInfo(this.element,l))})},t.Product=o,o}(okanjo,this),function(t,e){function o(e,o){t._Widget.call(this,e,o),this.config=o=o||{},this.templates={ad_error:\"okanjo.error\",ad_main:\"ad.block\"},this.css={ad_main:\"ad.block\"},this.disable_inline_buy=void 0===this.config.disable_inline_buy?!1:o.disable_inline_buy===!0,this.proxy_url=null,this.configMap={key:\"key\",proxy_url:\"proxy-url\",content:\"content\",size:\"size\",expandable:\"expandable\",type:\"type\",id:\"id\",template_ad_main:\"template-ad-main\",template_ad_error:\"template-ad-error\",disable_inline_buy:\"disable-inline-buy\",template_product_main:\"template-product-main\",template_product_error:\"template-product-error\"},o.no_init||this.init()}t.util.inherits(o,t._Widget),o.contentTypes={creative:\"creative\",dynamic:\"dynamic\"},o.types={product:\"product\"},o.sizes={billboard:{width:970,height:250},button_2:{width:120,height:60},half_page:{width:300,height:600},leaderboard:{width:728,height:90},medium_rectangle:{width:300,height:250},micro_bar:{width:88,height:31},portrait:{width:300,height:1050},rectangle:{width:180,height:150},super_leaderboard:{width:970,height:90},wide_skyscraper:{width:160,height:600},large_mobile_banner:{width:320,height:100},mobile_leaderboard:{width:320,height:50},small_square:{width:200,height:200},button_1:{width:120,height:90},full_banner:{width:468,height:60},half_banner:{width:234,height:60},large_rectangle:{width:336,height:280},pop_under:{width:720,height:300},three_to_one_rectangle:{width:300,height:100},skyscraper:{width:120,height:600},square:{width:250,height:250},square_button:{width:125,height:125},vertical_banner:{width:120,height:240},vertical_rectangle:{width:240,height:400}};var n=o.prototype;return n.widgetName=\"Ad\",n.load=function(){if(t.util.empty(this.config.content))this.hasCreativeContent()?this.config.content=o.contentTypes.creative:this.config.content=o.contentTypes.dynamic;else if(this.config.content!==o.contentTypes.creative||this.hasCreativeContent()){if(this.config.content===o.contentTypes.dynamic&&this.hasCreativeContent())console.warn(\"[Okanjo.Ad] Ad content is dynamic, but ad placement contains markup. Markup will be clobbered!\");else if(!o.contentTypes.hasOwnProperty(this.config.content))return this.element.innerHTML=t.mvc.render(this.templates.ad_error,this,{message:\"Invalid ad content: \"+this.config.content}),t.report(this.widgetName,\"Invalid ad content: \"+this.config.content),!1}else console.warn(\"[Okanjo.Ad] Ad content is creative, but ad placement does not contain creative markup. Switching to dynamic!\"),this.config.content=o.contentTypes.dynamic;if(t.util.empty(this.config.type)?this.config.type=o.types.product:o.types.hasOwnProperty(this.config.type)||(console.warn(\"[Okanjo.\"+this.widgetName+\"] Unknown type\",this.config.type,\"given, using type `product` instead\"),this.config.type=o.types.product),!t.util.empty(this.config.size)&&o.sizes.hasOwnProperty(this.config.size)&&this.setElementSize(o.sizes[this.config.size]),this.config.disable_inline_buy&&\"string\"==typeof this.config.disable_inline_buy&&(this.disable_inline_buy=\"true\"===this.config.disable_inline_buy.toLowerCase()),this.config.proxy_url&&(this.proxy_url=this.config.proxy_url,delete this.config.proxy_url),t.metrics.trackEvent(t.metrics.object_type.widget,t.metrics.event_type.impression,{ch:t.metrics.channel.ad_widget,cx:this.config.content,m:t.metrics.copy(this.config,t.metrics.includeElementInfo(this.element,{wgid:this.instanceId}))}),this.config.type===o.types.product){if(t.util.empty(this.config.id))return this.element.innerHTML=t.mvc.render(this.templates.ad_error,this,{message:\"Missing ad product id\"}),t.report(this.widgetName,\"Missing ad product id\"),!1;if(this.config.content==o.contentTypes.dynamic)this.insertProductWidget();else{if(this.config.content!=o.contentTypes.creative)return this.element.innerHTML=t.mvc.render(this.templates.ad_error,this,{message:\"Cannot render ad in content: \"+this.config.content}),t.report(this.widgetName,\"Cannot render ad in content: \"+this.config.content),!1;this.insertCreativeWidget()}}return!0},n.render=function(){var e,n=document.createElement(\"div\"),i=[],r=this.config.content==o.contentTypes.dynamic&&!t.util.empty(this.config.size);for(n.innerHTML=t.mvc.render(this.templates.ad_main,this,{config:this.config},{blockClasses:r?[\"okanjo-ad-fit\"]:[]}),e=0;e<this.element.childNodes.length;e++)1===this.element.childNodes[e].nodeType&&i.push(this.element.childNodes[e]);for(e=0;e<n.childNodes.length;e++)1===n.childNodes[e].nodeType&&this.element.appendChild(n.childNodes[e]);var a=t.qwery(\".okanjo-ad-container\",this.element)[0];for(e=0;e<i.length;e++)a.appendChild(i[e]);t.metrics.trackEvent(t.metrics.object_type.product,t.metrics.event_type.impression,{id:this.config.id,ch:t.metrics.channel.ad_widget,cx:this.config.content,m:t.metrics.copy(this.config,t.metrics.includeElementInfo(this.element,{wgid:this.instanceId}))})},n.interact=function(e){var o=t.qwery(\"a\",this.productWidget.element);if(o.length>0)this._waitingOnProductLoad=!1,t.Product.interactTile.call(o[0],e,!0);else if(!this._waitingOnProductLoad){this._waitingOnProductLoad=!0;var n=this,i=setInterval(function(){n._waitingOnProductLoad?n.interact(e):clearInterval(i)},250);console.warn(\"Waiting for Okanjo Product widget to load...\")}},n.insertCreativeWidget=function(){this.insertProductWidget({\nhidden:!0});var t=this;this.element.addEventListener?this.element.addEventListener(\"click\",function(e){t.interact(e)}):this.element.attachEvent(\"onclick\",function(e){t.interact(e)})},n.insertProductWidget=function(e){e=e||{};var o=document.createElement(\"div\");o.className=\"okanjo-ad-dynamic-product\",e.hidden&&(o.style.display=\"none\"),this.element.appendChild(o),this.render();var n={id:this.config.id,key:this.key,mode:t.Product.contentTypes.single,disable_inline_buy:this.disable_inline_buy,disable_popup:this.config.disable_popup===!0,proxy_url:this.proxy_url,expandable:void 0===this.config.expandable||(\"boolean\"==typeof this.config.expandable?this.config.expandable:\"true\"===(\"\"+this.config.expandable).toLowerCase()),metrics_context:t.metrics.channel.ad_widget,metrics_channel_context:this.config.content,template_product_main:\"product.single\"};return this.config.template_product_main&&(n.template_product_main=this.config.template_product_main),this.config.template_product_error&&(n.template_product_error=this.config.template_product_error),this.productWidget=new t.Product(o,n),this.productWidget},n.setElementSize=function(t){this.element.style.display=\"block\",this.element.style.overflow=\"hidden\",this.element.style.width=t.width+\"px\",this.element.style.height=t.height+\"px\"},n.hasCreativeContent=function(){if(this.element.childElementCount&&this.element.childElementCount>0)return!0;for(var t=0;t<this.element.childNodes.length;t++)if(1===this.element.childNodes[t].nodeType)return!0},t.Ad=o,o}(okanjo,this),okanjo}),/*! okanjo-js v0.7.1 | (c) 2013 Okanjo Partners Inc | https://okanjo.com/ */\nfunction(t){t.mvc.registerCss(\"ad.block\",\".okanjo-ad-block{position:relative}.okanjo-ad-block .okanjo-ad-dynamic-product .okanjo-product-list{margin:0;width:100%}.okanjo-ad-block.okanjo-ad-fit{width:100%;height:100%;position:relative}.okanjo-ad-block.okanjo-ad-fit .okanjo-ad-container,.okanjo-ad-block.okanjo-ad-fit .okanjo-ad-dynamic-product,.okanjo-ad-block.okanjo-ad-fit .okanjo-product-block,.okanjo-ad-block.okanjo-ad-fit .okanjo-product-list{height:100%;width:100%}.okanjo-ad-block.okanjo-ad-fit .okanjo-product-block .okanjo-product{height:100%;width:100%;padding:0;box-sizing:border-box;margin:0}.okanjo-ad-block.okanjo-ad-fit .okanjo-product-block .okanjo-product-image-container{margin:.5em}.okanjo-ad-block.okanjo-ad-fit .okanjo-product-block .okanjo-product-title-container{height:auto;margin:1em .5em}.okanjo-ad-block.okanjo-ad-fit .okanjo-product-block .okanjo-product-price-container{position:absolute;bottom:.5em;background:#fff;padding:.25em 0 0;margin:0 1px 0 0;left:1px;right:1px}.okanjo-ad-block.okanjo-ad-fit .okanjo-product-block.lt-ie9 .okanjo-product-title-container:before{display:none}\",{id:\"okanjo-ad-block\"}),t.mvc.registerTemplate(\"ad.block\",'<div class=\"okanjo-ad-block {{classDetects}}\"><div class=\"okanjo-ad-container okanjo-expansion-root\" data-size={{size}}></div><div class=okanjo-ad-meta></div></div>',function(e,o){return e=e||{config:{}},o=t.util.clone(o),o.config=e.config,o.size=e.config.size||\"undefined\",o},{css:[\"ad.block\"]}),t.mvc.registerCss(\"okanjo.core\",\"\",{id:\"okanjo-core\"}),t.mvc.registerCss(\"okanjo.modal\",'.okanjo-expansion-root{position:relative}.okanjo-expansion-root iframe.okanjo-ad-in-unit{position:absolute;top:0;left:0;right:0;bottom:0;z-index:1}html.okanjo-modal-active{overflow:hidden!important}html.okanjo-modal-active body{overflow:hidden!important;margin:0}.okanjo-modal-margin-fix{margin-right:15px!important}.okanjo-modal-container{position:fixed;top:0;right:0;left:0;bottom:0;z-index:2147483647;background-color:rgba(0,0,0,.65);-webkit-transition-duration:210ms;transition-duration:210ms;-webkit-transition-property:background-color;transition-property:background-color}.okanjo-modal-container.lt-ie9{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR4nGNiWAoAAK4AqL41IDIAAAAASUVORK5CYII=)}.okanjo-modal-container.okanjo-modal-fade-out{background-color:rgba(0,0,0,0)}.okanjo-modal-container.okanjo-modal-fade-out .okanjo-modal-window{opacity:0;-webkit-transform:scale(.95,.95) translateY(50px);transform:scale(.95,.95) translateY(50px)}.okanjo-modal-container.okanjo-modal-hidden{display:none!important}.okanjo-modal-container .okanjo-modal-window{position:relative;max-width:900px;width:90%;background:0 0;margin:56px auto 40px;opacity:1;-webkit-transform:scale(1,1) translateY(0);transform:scale(1,1) translateY(0);-webkit-transition-duration:210ms;transition-duration:210ms;-webkit-transition-timing-function:cubic-bezier(.13,.025,.15,1.15);transition-timing-function:cubic-bezier(.13,.025,.15,1.15);transition-property:-webkit-transform,opacity}.okanjo-modal-container .okanjo-modal-window:after,.okanjo-modal-container .okanjo-modal-window:before{content:\" \";display:table}.okanjo-modal-container .okanjo-modal-window:after{clear:both}.okanjo-modal-container .okanjo-modal-window .okanjo-modal-header{padding-top:5px;padding-bottom:5px;border-bottom:1px solid #d7d7d7}.okanjo-modal-container .okanjo-modal-window .okanjo-modal-header img{height:50px;width:auto}.okanjo-modal-container .okanjo-modal-window-skin{width:auto;height:auto;box-shadow:0 10px 25px rgba(0,0,0,.5);position:absolute;background:#fff;border-radius:4px;top:0;bottom:0;left:0;right:0}.okanjo-modal-container .okanjo-modal-window-outer{position:absolute;top:15px;left:15px;bottom:15px;right:15px;vertical-align:top}.okanjo-modal-container .okanjo-modal-window-inner{position:relative;width:100%;height:100%;-webkit-overflow-scrolling:touch;overflow:auto}.okanjo-modal-container .okanjo-modal-window-inner iframe{height:100%;width:100%;margin-right:-15px}.okanjo-modal-container .okanjo-modal-close-button{color:#fff;cursor:pointer;position:absolute;right:0;top:-48px;text-align:right;font-size:40px;line-height:1em;overflow:visible;width:40px;height:40px}',{id:\"okanjo-modal\"}),t.mvc.registerTemplate(\"okanjo.error\",\"<span class=okanjo-error>{{ message }}</span> {{#code}} <span class=okanjo-error-code>Reference: {{ code }}</span> {{/code}}\",{css:[\"okanjo.core\"]}),t.mvc.registerCss(\"product.block\",'.okanjo-expansion-root{position:relative}.okanjo-expansion-root iframe.okanjo-ad-in-unit{position:absolute;top:0;left:0;right:0;bottom:0;z-index:1}.okanjo-product-block{font:14px Helvetica,Arial,sans-serif;line-height:1.2em}.okanjo-product-block a{display:block;text-decoration:none}.okanjo-product-block a:after,.okanjo-product-block a:before{content:\" \";display:table}.okanjo-product-block a:after{clear:both}.okanjo-product-block .okanjo-product-list{list-style-type:none;padding:0;margin:0}.okanjo-product-block .okanjo-product{width:130px;overflow:hidden;text-align:center;border:1px solid #ccc;padding:7px;margin:0 4px 1px 0;display:inline-block;box-shadow:1px 1px 1px 1px #eee;background-color:#fff;box-sizing:content-box}.lt-ie8.okanjo-product-block .okanjo-product{display:inline;zoom:1}.okanjo-product-block .okanjo-product-image-container{height:130px}.okanjo-product-block .okanjo-product-image{max-width:100%;max-height:100%;border:0}.okanjo-product-block .okanjo-product-title-container{line-height:17px;overflow:hidden;height:51px;margin:10px 0 0;word-wrap:break-word}.okanjo-product-block .okanjo-product-title-container span{display:inline-block}.lt-ie8.okanjo-product-block .okanjo-product-title-container span{display:inline;zoom:1}.okanjo-product-block .okanjo-ellipses:after{content:\"...\"}.okanjo-product-block .okanjo-visually-hidden{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.okanjo-product-block .okanjo-product-price-container{line-height:21px;font-weight:700;color:#333;margin-top:5px;margin-bottom:5px;margin-right:5px}.okanjo-product-block .okanjo-product-buy-button{color:#333;border:1px solid #ccc;border-bottom-color:#bbb;background-color:#eee;background-repeat:no-repeat;background-image:-webkit-linear-gradient(top,#fff,#eee);background-image:linear-gradient(to bottom,#fff,#eee);text-shadow:0 1px 1px rgba(255,255,255,.75);box-shadow:inset 0 1px 0 rgba(255,255,255,.2),0 1px 2px rgba(0,0,0,.05);-webkit-transition:.1s;transition:.1s;font-size:13px;border-radius:4px;padding:5px 12px 6px;position:relative;bottom:2px}.okanjo-product-block a:hover .okanjo-product-buy-button{color:#111;border:1px solid #bbb;border-bottom-color:#aaa;box-shadow:inset 0 1px 0 rgba(255,255,255,.2),0 1px 3px rgba(0,0,0,.1)}.okanjo-product-block .okanjo-product-seller-container{margin-top:5px;height:17px;font-size:12px;line-height:17px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.okanjo-product-block .okanjo-product-seller-container .okanjo-product-seller-intro{color:#333}.okanjo-inline-buy-frame{display:block;height:100%;width:100%}',{id:\"okanjo-product-block\"});var e='<div class=\"{{template_name}} okanjo-expansion-root {{classDetects}}\"><ul class=okanjo-product-list itemscope=\"\" itemtype=http://schema.org/ItemList>{{#products}}<li class=okanjo-product itemscope=\"\" itemtype=http://schema.org/Product><a href=\"//{{okanjoMetricUrl}}/metrics/pr/int?m[bot]=true&id={{ id }}&ch={{#config}}{{ metrics_context }}{{/config}}&cx={{#config}}{{ metrics_channel_context }}{{/config}}&key={{#config}}{{ key }}{{/config}}&n={{ now }}&u={{ escaped_buy_url }}\" data-inline-buy-url=\"{{ inline_buy_url }}\" data-buy-url=\"{{ buy_url }}\" data-metric-url=\"//{{okanjoMetricUrl}}/metrics/pr/int?id={{ id }}&ch={{#config}}{{ metrics_context }}{{/config}}&cx={{#config}}{{ metrics_channel_context }}{{/config}}&key={{#config}}{{ key }}{{/config}}\" data-proxy-url=\"{{ proxy_url}}\" data-expandable=\"{{#config}}{{ expandable }}{{/config}}\" data-channel=\"{{#config}}{{ metrics_context }}{{/config}}\" data-context=\"{{#config}}{{ metrics_channel_context }}{{/config}}\" data-article-id=\"{{ article_id }}\" data-placement-enabled=\"{{ placement_test_enabled }}\" data-placement-test=\"{{ placement_test_id }}\" data-placement-seed=\"{{ placement_test_seed }}\" data-disable-popup=\"{{ disable_popup }}\" data-id=\"{{ id }}\" data-instance-id=\"{{ instanceId }}\" target=_blank itemprop=url title=\"Buy now: {{ name }}\"><div class=okanjo-product-image-container><img class=okanjo-product-image src=\"{{ image_url }}\" title=\"{{ name }}\" itemprop=image></div><div class=okanjo-product-title-container><span class=okanjo-product-title itemprop=name>{{ name }}</span></div><div itemprop=offers itemscope=\"\" itemtype=http://schema.org/Offer><div class=okanjo-product-price-container><span itemprop=priceCurrency content=\"{{ currency }}\">$</span><span class=okanjo-product-price itemprop=price>{{ price_formatted }}</span></div><div class=okanjo-product-button-container><div class=okanjo-product-buy-button>Buy Now</div><meta property=url itemprop=url content=\"//{{okanjoMetricUrl}}/metrics/pr/int?m[bot]=true&m[microdata]=true&id={{id}}&ch={{#config}}{{ metrics_context }}{{/config}}&cx={{#config}}{{ metrics_channel_context }}{{/config}}&key={{#config}}{{ key }}{{/config}}&n={{ now }}&u={{ escaped_buy_url }}\"></div>{{#sold_by}}<div class=okanjo-product-seller-container itemprop=seller itemscope=\"\" itemtype=http://schema.org/Organization><span><span class=okanjo-product-seller-intro>From</span>&#32;<span class=okanjo-product-seller itemprop=name title=\"{{ sold_by }}\">{{ sold_by }}</span></span></div>{{/sold_by}}</div><div class=\"okanjo-product-meta okanjo-visually-hidden\">{{#impression_url}}<img src={{impression_url}} alt=\"\">{{/impression_url}}{{#upc}}<span itemprop=productID>upc:{{upc}}</span>{{/upc}} {{#manufacturer}}<span itemprop=manufacturer>{{manufacturer}}</span>{{/manufacturer}}</div></a></li>{{/products}}</ul><div class=\"okanjo-product-meta okanjo-visually-hidden\"></div></div>';t.mvc.registerTemplate(\"product.block\",e,function(e,o){return e=e||{products:[],config:{}},o=t.util.clone(o),o.template_name=\"okanjo-product-block\",o.config=e.config,o.proxy_url=this.proxy_url,o.products=t.mvc.formats.product(e.products),o.article_id=this.articleId||\"\",o.placement_test_enabled=this.placementTest&&this.placementTest.enabled?\"1\":\"0\",o.placement_test_id=this.placementTest?this.placementTest.id:\"\",o.placement_test_seed=this.placementTest?this.placementTest.seed:\"\",o.disable_popup=this.disable_popup?\"1\":\"\",o.instanceId=this.instanceId,o},{css:[\"product.block\",\"okanjo.modal\"]}),t.mvc.registerCss(\"product.block2\",'.okanjo-expansion-root{position:relative}.okanjo-expansion-root iframe.okanjo-ad-in-unit{position:absolute;top:0;left:0;right:0;bottom:0;z-index:1}.okanjo-product-block2{color:#333;font:12px/1.2 \"Helvetica Neue\",Helvetica,Roboto,Arial,sans-serif}.okanjo-product-block2:after,.okanjo-product-block2:before{content:\" \";display:table}.okanjo-product-block2:after{clear:both}.okanjo-product-block2 .okanjo-ellipses:after{content:\"...\"}.okanjo-product-block2 .okanjo-visually-hidden{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.okanjo-product-block2 .okanjo-product{display:block;float:left;background-color:#fff;box-sizing:content-box;width:148px;border:1px solid #e6e6e6;margin:0 -1px -1px 0}.okanjo-product-block2 .okanjo-product:last-child{margin:0}.okanjo-product-block2 a{display:block;overflow:hidden;color:#333;text-decoration:none;padding:10px}.okanjo-product-block2 a:hover{color:inherit;text-decoration:none}.okanjo-product-block2 .okanjo-product-image-container{float:left;overflow:hidden;text-align:center;vertical-align:middle;width:100%;height:128px;line-height:127px;margin:0 0 3px}.okanjo-product-block2 .okanjo-product-image{max-width:100%;max-height:100%;border:none;vertical-align:middle}.okanjo-product-block2 .okanjo-product-info-container{float:left;height:auto;width:100%}.okanjo-product-block2 .okanjo-product-seller-container{color:#999;font-size:11px;line-height:12px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.okanjo-product-block2 .okanjo-product-seller-container.newsprint{font-family:Georgia,serif}.okanjo-product-block2 .okanjo-product-title-container{overflow:hidden;margin-top:3px;margin-bottom:4px;font-weight:700;font-size:12px;line-height:14px;height:45px;word-wrap:break-word}.okanjo-product-block2 .okanjo-product-title-container.newsprint{font:13px/15px Georgia,serif}.okanjo-product-block2 .okanjo-product-title-container span{display:inline-block}.lt-ie8.okanjo-product-block2 .okanjo-product-title-container span{display:inline;zoom:1}.okanjo-product-block2 .okanjo-product-price-container{font-size:15px;line-height:1;margin-bottom:5px}.okanjo-product-block2 .okanjo-product-buy-button{color:#09f;font-size:12px;line-height:13px;font-weight:700;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.okanjo-product-block2 .okanjo-product.list{width:298px;height:122px}.okanjo-product-block2 .okanjo-product.list a{padding:11px}.okanjo-product-block2 .okanjo-product.list .okanjo-product-title-container{margin-top:4px;margin-bottom:6px}.okanjo-product-block2 .okanjo-product.list .okanjo-product-image-container{width:100px;height:100px;line-height:1px;margin:0 11px 0 0}.okanjo-product-block2 .okanjo-product.list .okanjo-product-info-container{height:auto;float:none}.okanjo-product-block2.okanjo-cta-style-button .okanjo-product-title-container{height:30px}.okanjo-product-block2.okanjo-cta-style-button .okanjo-product-buy-button{display:block;text-align:center;line-height:26px;padding:0 8px;border:1px solid #09f;border-radius:2px;-webkit-transition:50ms ease;transition:50ms ease}.okanjo-product-block2.okanjo-cta-style-button .okanjo-product-buy-button:hover{background:#09f;color:#fff}.okanjo-product-block2.okanjo-cta-style-button .okanjo-product-buy-button:active{box-shadow:inset 0 3px 10px rgba(0,0,0,.15)}.okanjo-product-block2.medium_rectangle .okanjo-product{width:148px;height:248px}.okanjo-product-block2.medium_rectangle .okanjo-product:first-child{width:149px;height:248px}.okanjo-product-block2.medium_rectangle .okanjo-product.list{width:298px;height:123px}.okanjo-product-block2.medium_rectangle .okanjo-product.list .okanjo-product-image-container{width:100px;height:100px;line-height:1px}.okanjo-product-block2.medium_rectangle .okanjo-product.list .okanjo-product-info-container{height:auto;float:left;width:165px}.okanjo-product-block2.medium_rectangle .okanjo-product.list:first-child{height:124px}.okanjo-product-block2.medium_rectangle .okanjo-product.list:first-child a{padding-top:12px}.okanjo-product-block2.leaderboard .okanjo-product{width:241px;height:88px}.okanjo-product-block2.leaderboard .okanjo-product:first-child{width:242px}.okanjo-product-block2.leaderboard .okanjo-product a{padding:7px}.okanjo-product-block2.leaderboard .okanjo-product .okanjo-product-image-container{width:74px;height:74px;line-height:1px;margin:0 7px 0 0}.okanjo-product-block2.leaderboard .okanjo-product .okanjo-product-title-container{font-size:11px;line-height:13px;height:26px;margin-top:1px;margin-bottom:4px}.okanjo-product-block2.half_page .okanjo-product .okanjo-product-title-container,.okanjo-product-block2.leaderboard .okanjo-product .okanjo-product-price-container{margin-bottom:3px}.okanjo-product-block2.leaderboard .okanjo-product .okanjo-product-title-container.newsprint{font:700 11px/13px Georgia,serif}.okanjo-product-block2.half_page .okanjo-product{height:118px}.okanjo-product-block2.half_page .okanjo-product:nth-last-child(n+2){height:119px}.okanjo-product-block2.half_page .okanjo-product .okanjo-product-image-container{width:96px;height:96px}.okanjo-product-block2.large_mobile_banner .okanjo-product{width:318px;height:98px}.okanjo-product-block2.large_mobile_banner .okanjo-product a{padding:6px}.okanjo-product-block2.large_mobile_banner .okanjo-product .okanjo-product-image-container{width:86px;height:86px}.okanjo-product-block2.large_mobile_banner .okanjo-product .okanjo-product-title-container{height:30px}.okanjo-product-block2.auto{font-size:1em;width:100%}.okanjo-product-block2.auto .okanjo-product{width:100%;height:auto;border-left:none;border-right:none}.okanjo-product-block2.auto .okanjo-product a{max-width:500px;width:95%;margin:0 auto;padding:2.5%}.okanjo-product-block2.auto .okanjo-product.list{height:auto}.okanjo-product-block2.auto .okanjo-product.list .okanjo-product-image-container{width:18%;height:auto;line-height:1px}.okanjo-product-block2.auto .okanjo-product.list .okanjo-product-info-container{height:auto;float:none;margin-left:21%;width:79%}.okanjo-product-block2.auto .okanjo-product.list .okanjo-product-seller-container{height:auto;font-size:12px;line-height:1.2}.okanjo-product-block2.auto .okanjo-product.list .okanjo-product-price-container{height:auto;font-size:15px;line-height:1.5}.okanjo-product-block2.auto .okanjo-product.list .okanjo-product-title-container{font-size:15px;line-height:1.4;height:auto}.okanjo-product-block2.auto .okanjo-product.list .okanjo-product-buy-button{display:inline-block;font-size:14px;line-height:1.8;margin-bottom:-1.7%}.okanjo-product-block2.auto.okanjo-cta-style-button .okanjo-product.list .okanjo-product-price-container{line-height:1.3}.okanjo-product-block2.auto.okanjo-cta-style-button .okanjo-product.list .okanjo-product-title-container{line-height:1.25}.okanjo-product-block2.auto.okanjo-cta-style-button .okanjo-product.list .okanjo-product-buy-button{font-size:13px}.okanjo-inline-buy-frame{display:block;height:100%;width:100%}',{id:\"okanjo-product-block2\"});var o='<div class=\"{{template_name}} okanjo-expansion-root {{classDetects}} {{#config}} {{ size }} okanjo-cta-style-{{ template_cta_style }}{{^template_cta_style}}link{{/template_cta_style}}{{/config}} okanjo-product-block2-cus-{{blockId}}\"><div class=okanjo-product-list itemscope=\"\" itemtype=http://schema.org/ItemList>{{#products}}<div class=\"okanjo-product {{#config}}{{ template_layout }}{{/config}}\" itemscope=\"\" itemtype=http://schema.org/Product><a href=\"//{{okanjoMetricUrl}}/metrics/pr/int?m[bot]=true&id={{ id }}&ch={{#config}}{{ metrics_context }}{{/config}}&cx={{#config}}{{ metrics_channel_context }}{{/config}}&key={{#config}}{{ key }}{{/config}}&n={{ now }}&u={{ escaped_buy_url }}\" data-inline-buy-url=\"{{ inline_buy_url }}\" data-buy-url=\"{{ buy_url }}\" data-metric-url=\"//{{okanjoMetricUrl}}/metrics/pr/int?id={{ id }}&ch={{#config}}{{ metrics_context }}{{/config}}&cx={{#config}}{{ metrics_channel_context }}{{/config}}&key={{#config}}{{ key }}{{/config}}\" data-proxy-url=\"{{ proxy_url}}\" data-expandable=\"{{#config}}{{ expandable }}{{/config}}\" data-channel=\"{{#config}}{{ metrics_context }}{{/config}}\" data-context=\"{{#config}}{{ metrics_channel_context }}{{/config}}\" data-article-id=\"{{ article_id }}\" data-placement-enabled=\"{{ placement_test_enabled }}\" data-placement-test=\"{{ placement_test_id }}\" data-placement-seed=\"{{ placement_test_seed }}\" data-disable-popup=\"{{ disable_popup }}\" data-instance-id=\"{{ instanceId }}\" data-id=\"{{ id }}\" target=_blank itemprop=url title=\"Buy now: {{ name }}\"><div class=okanjo-product-image-container><img class=okanjo-product-image src=\"{{ image_url }}\" title=\"{{ name }}\" itemprop=image></div><div class=okanjo-product-info-container><div class=\"okanjo-product-seller-container {{#config}}{{ template_theme }}{{/config}}\" itemprop=seller itemscope=\"\" itemtype=http://schema.org/Organization><span class=okanjo-product-seller itemprop=name title=\"{{ sold_by }}\">{{ sold_by }}{{^sold_by}}&nbsp;{{/sold_by}}</span></div><div class=\"okanjo-product-title-container {{#config}}{{ template_theme }}{{/config}}\"><span class=okanjo-product-title itemprop=name>{{ name }}</span></div><div itemprop=offers itemscope=\"\" itemtype=http://schema.org/Offer><div class=okanjo-product-price-container><span itemprop=priceCurrency content=\"{{ currency }}\">$</span><span class=okanjo-product-price itemprop=price>{{ price_formatted }}</span></div><div class=okanjo-product-button-container><div class=okanjo-product-buy-button><span>{{meta.cta_text}}{{^meta.cta_text}}{{#config}}{{ template_cta_text }}{{^template_cta_text}}Shop Now{{/template_cta_text}}{{/config}}{{/meta.cta_text}}</span></div><meta property=url itemprop=url content=\"//{{okanjoMetricUrl}}/metrics/pr/int?m[bot]=true&m[microdata]=true&id={{id}}&ch={{#config}}{{ metrics_context }}{{/config}}&cx={{#config}}{{ metrics_channel_context }}{{/config}}&key={{#config}}{{ key }}{{/config}}&n={{ now }}&u={{ escaped_buy_url }}\"></div></div><div class=\"okanjo-product-meta okanjo-visually-hidden\">{{#impression_url}}<img src={{impression_url}} alt=\"\">{{/impression_url}}{{#upc}}<span itemprop=productID>upc:{{upc}}</span>{{/upc}} {{#manufacturer}}<span itemprop=manufacturer>{{manufacturer}}</span>{{/manufacturer}}</div></div></a></div>{{/products}}</div><div class=\"okanjo-product-meta okanjo-visually-hidden\"></div></div>',n=0;t.mvc.registerTemplate(\"product.block2\",o,function(e,o){e=e||{products:[],config:{}},o=t.util.clone(o),o.template_name=\"okanjo-product-block2\",o.config=e.config,o.proxy_url=this.proxy_url,o.products=t.mvc.formats.product(e.products),o.article_id=this.articleId||\"\",o.placement_test_enabled=this.placementTest&&this.placementTest.enabled?\"1\":\"0\",o.placement_test_id=this.placementTest?this.placementTest.id:\"\",o.placement_test_seed=this.placementTest?this.placementTest.seed:\"\",o.disable_popup=this.disable_popup?\"1\":\"\",o.instanceId=this.instanceId,\"leaderboard\"==o.config.size||\"large_mobile_banner\"==o.config.size?(o.config.template_layout=\"list\",o.config.template_cta_style=\"link\"):\"half_page\"!=o.config.size&&\"auto\"!=o.config.size||(o.config.template_layout=\"list\");var i=o.config.template_cta_color;if(i){var r,a=\"okanjo-product-block2-cus-\"+n;r=\".okanjo-product-block2.\"+a+\" .okanjo-product-buy-button { color: \"+i+\";} .okanjo-product-block2.\"+a+\".okanjo-cta-style-button .okanjo-product-buy-button { border: 1px solid \"+i+\"; } .okanjo-product-block2.\"+a+\".okanjo-cta-style-button .okanjo-product-buy-button:hover { background: \"+i+\"; } \",t.mvc.registerCss(a,r,{id:a}),t.mvc.ensureCss(a)}return o.blockId=n++,o},{css:[\"product.block2\",\"okanjo.modal\"]}),t.mvc.registerCss(\"product.sidebar\",'.okanjo-expansion-root{position:relative}.okanjo-expansion-root iframe.okanjo-ad-in-unit{position:absolute;top:0;left:0;right:0;bottom:0;z-index:1}.okanjo-product-sidebar{font:14px Helvetica,Arial,sans-serif;line-height:1.2em;border:1px solid #ccc;background-color:#fff;width:298px;height:auto}.okanjo-product-sidebar a{display:block;text-decoration:none}.okanjo-product-sidebar a:after,.okanjo-product-sidebar a:before{content:\" \";display:table}.okanjo-product-sidebar a:after{clear:both}.okanjo-product-sidebar .okanjo-product-list{list-style-type:none;padding:0;margin:0}.okanjo-product-sidebar .okanjo-product{height:123px;width:298px;overflow:hidden;border-top:1px solid #eee}.okanjo-product-sidebar .okanjo-product:first-of-type{height:124px;border-top:none}.okanjo-product-sidebar .okanjo-product-image-container{height:105px;width:105px;margin:10px;float:left}.okanjo-product-sidebar .okanjo-product-image{max-width:100%;max-height:100%;border:0}.okanjo-product-sidebar .okanjo-product-title-container{line-height:17px;overflow:hidden;height:51px;margin:10px 10px 0 0;word-wrap:break-word}.okanjo-product-sidebar .okanjo-product-title-container span{display:inline-block}.lt-ie8.okanjo-product-sidebar .okanjo-product-title-container span{display:inline;zoom:1}.okanjo-product-sidebar .okanjo-ellipses:after{content:\"...\"}.okanjo-product-sidebar .okanjo-visually-hidden{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.okanjo-product-sidebar .okanjo-product-price-container{display:inline-block;line-height:21px;font-weight:700;color:#333;margin-top:5px;margin-bottom:5px;margin-right:5px}.lt-ie8.okanjo-product-sidebar .okanjo-product-price-container{display:inline;zoom:1}.okanjo-product-sidebar .okanjo-product-button-container{display:inline-block}.lt-ie8.okanjo-product-sidebar .okanjo-product-button-container{display:inline;zoom:1}.okanjo-product-sidebar .okanjo-product-buy-button{color:#333;border:1px solid #ccc;border-bottom-color:#bbb;background-color:#eee;background-repeat:no-repeat;background-image:-webkit-linear-gradient(top,#fff,#eee);background-image:linear-gradient(to bottom,#fff,#eee);text-shadow:0 1px 1px rgba(255,255,255,.75);box-shadow:inset 0 1px 0 rgba(255,255,255,.2),0 1px 2px rgba(0,0,0,.05);-webkit-transition:.1s;transition:.1s;font-size:13px;border-radius:4px;padding:5px 12px 6px;position:relative;bottom:2px;display:inline-block;margin-top:5px}.lt-ie8.okanjo-product-sidebar .okanjo-product-buy-button{display:inline;zoom:1}.okanjo-product-sidebar a:hover .okanjo-product-buy-button{color:#111;border:1px solid #bbb;border-bottom-color:#aaa;box-shadow:inset 0 1px 0 rgba(255,255,255,.2),0 1px 3px rgba(0,0,0,.1)}.okanjo-product-sidebar .okanjo-product-seller-container{margin-top:5px;height:17px;font-size:12px;line-height:17px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.okanjo-product-sidebar .okanjo-product-seller-container .okanjo-product-seller-intro{color:#333}.okanjo-inline-buy-frame{display:block;height:100%;width:100%}',{id:\"okanjo-product-sidebar\"}),t.mvc.registerTemplate(\"product.sidebar\",e,function(e,o){return e=e||{products:[],config:{}},o=t.util.clone(o),o.template_name=\"okanjo-product-sidebar\",o.config=e.config,o.proxy_url=this.proxy_url,o.products=t.mvc.formats.product(e.products),o.article_id=this.articleId||\"\",o.placement_test_enabled=this.placementTest&&this.placementTest.enabled?\"1\":\"0\",o.placement_test_id=this.placementTest?this.placementTest.id:\"\",o.placement_test_seed=this.placementTest?this.placementTest.seed:\"\",o.disable_popup=this.disable_popup?\"1\":\"\",o},{css:[\"product.sidebar\",\"okanjo.modal\"]}),t.mvc.registerCss(\"product.single\",'.okanjo-expansion-root{position:relative}.okanjo-expansion-root iframe.okanjo-ad-in-unit{position:absolute;top:0;left:0;right:0;bottom:0;z-index:1}.okanjo-product-single{font:14px Helvetica,Arial,sans-serif;line-height:1.2em}.okanjo-product-single a{display:block;text-decoration:none}.okanjo-product-single a:after,.okanjo-product-single a:before{content:\" \";display:table}.okanjo-product-single a:after{clear:both}.okanjo-product-single .okanjo-product-list{list-style-type:none;padding:0;margin:0}.okanjo-product-single .okanjo-product{width:284px;height:234px;padding:7px;overflow:hidden;text-align:center;border:1px solid #ccc;display:inline-block;background-color:#fff}.lt-ie8.okanjo-product-single .okanjo-product{display:inline;zoom:1}.okanjo-product-single .okanjo-product-image-container{height:113px}.okanjo-product-single .okanjo-product-image{max-width:100%;max-height:100%;border:0}.okanjo-product-single .okanjo-product-title-container{line-height:17px;overflow:hidden;height:34px;margin:10px 0 0;word-wrap:break-word}.okanjo-product-single .okanjo-product-title-container>span{max-width:100%}.okanjo-product-single .okanjo-product-title-container span{display:inline-block}.lt-ie8.okanjo-product-single .okanjo-product-title-container span{display:inline;zoom:1}.okanjo-product-single .okanjo-ellipses:after{content:\"...\"}.okanjo-product-single .okanjo-visually-hidden{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.okanjo-product-single .okanjo-product-price-container{line-height:21px;font-weight:700;color:#333;margin-top:3px;margin-bottom:5px;margin-right:5px}.okanjo-product-single .okanjo-product-button-container{display:inline-block}.lt-ie8.okanjo-product-single .okanjo-product-button-container{display:inline;zoom:1}.okanjo-product-single .okanjo-product-buy-button{color:#333;border:1px solid #ccc;border-bottom-color:#bbb;background-color:#eee;background-repeat:no-repeat;background-image:-webkit-linear-gradient(top,#fff,#eee);background-image:linear-gradient(to bottom,#fff,#eee);text-shadow:0 1px 1px rgba(255,255,255,.75);box-shadow:inset 0 1px 0 rgba(255,255,255,.2),0 1px 2px rgba(0,0,0,.05);-webkit-transition:.1s;transition:.1s;font-size:13px;border-radius:4px;padding:5px 12px 6px;position:relative;bottom:2px;display:inline-block}.lt-ie8.okanjo-product-single .okanjo-product-buy-button{display:inline;zoom:1}.okanjo-product-single a:hover .okanjo-product-buy-button{color:#111;border:1px solid #bbb;border-bottom-color:#aaa;box-shadow:inset 0 1px 0 rgba(255,255,255,.2),0 1px 3px rgba(0,0,0,.1)}.okanjo-product-single .okanjo-product-seller-container{margin-top:5px;height:17px;font-size:12px;line-height:17px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.okanjo-product-single .okanjo-product-seller-container .okanjo-product-seller-intro{color:#333}.okanjo-inline-buy-frame{display:block;height:100%;width:100%}',{id:\"okanjo-product-single\"}),t.mvc.registerTemplate(\"product.single\",e,function(e,o){return e=e||{products:[],config:{}},o=t.util.clone(o),o.template_name=\"okanjo-product-single\",o.config=e.config,o.proxy_url=this.proxy_url,o.products=t.mvc.formats.product(e.products),o.article_id=this.articleId||\"\",o.placement_test_enabled=this.placementTest&&this.placementTest.enabled?\"1\":\"0\",o.placement_test_id=this.placementTest?this.placementTest.id:\"\",o.placement_test_seed=this.placementTest?this.placementTest.seed:\"\",o.disable_popup=this.disable_popup?\"1\":\"\",o.instanceId=this.instanceId,o},{css:[\"product.single\",\"okanjo.modal\"]})}(okanjo);"],"file":"okanjo-bundle.min.js","sourceRoot":"./"}